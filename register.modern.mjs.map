{"version":3,"file":"register.modern.mjs","sources":["src/getDomPath.js","src/utils.js","src/Hints.js","src/register.js"],"sourcesContent":["function getDomPath(el) {\n  var stack = []\n  while (el.parentNode) {\n    let sibCount = 0\n    let sibIndex = 0\n    for (var i = 0; i < el.parentNode.childNodes.length; i++) {\n      var sib = el.parentNode.childNodes[i]\n      if (sib.nodeName === el.nodeName) {\n        if (sib === el) {\n          sibIndex = sibCount\n        }\n        sibCount++\n      }\n    }\n    if (el.hasAttribute('id') && el.id !== '') {\n      stack.unshift(el.nodeName.toLowerCase() + '#' + el.id)\n    } else if (el.classList.toString() !== '' && el.tagName !== 'BODY') {\n      stack.unshift(el.nodeName.toLowerCase() + '.' + el.classList.toString())\n    } else if (sibCount > 1) {\n      stack.unshift(el.nodeName.toLowerCase() + ':eq(' + sibIndex + ')')\n    } else {\n      stack.unshift(el.nodeName.toLowerCase())\n    }\n    el = el.parentNode\n  }\n  const toFilter = ['html', 'body', 'div#root']\n  return stack.filter((el) => !toFilter.includes(el)).join(' > ')\n}\n\nexport default getDomPath\n","import getDomPath from './getDomPath'\nimport { createScheduler } from 'lrt'\n\nconst getElements = (container, tag) =>\n  Array.from(container.querySelectorAll(tag))\n\nconst getStylesheetRules = (sheets, k) => {\n  let rules = []\n  try {\n    rules = Array.from(sheets[k].rules || sheets[k].cssRules)\n  } catch (e) {\n    //\n  }\n  return rules\n}\n\nconst getNodeName = (el) =>\n  el.nodeName === 'A'\n    ? 'a'\n    : el.nodeName === 'BUTTON'\n    ? 'button'\n    : `${el.nodeName.toLowerCase()}[role=\"button\"]`\n\nconst attachLabels = (inputs, container) =>\n  inputs.map((input) => {\n    let labelText = ''\n    if (input.labels && input.labels[0]) {\n      labelText = input.labels[0].innerText\n    } else if (input.parentElement.nodeName === 'LABEL') {\n      labelText = input.parentElement.innerText\n    } else if (input.id) {\n      const label = container.querySelector(`label[for=\"${input.id}\"]`)\n      if (label) labelText = label.innerText\n    }\n    return {\n      labelText,\n      path: getDomPath(input),\n      type: input.type,\n    }\n  })\n\nconst textInputs = {\n  text: true,\n  search: true,\n  tel: true,\n  url: true,\n  email: true,\n  number: true,\n  password: true,\n}\n\nconst getAutocompleteWarnings = (container) => {\n  const inputs = getElements(container, 'input')\n  const warnings = inputs.filter((input) => {\n    const currentType = input.getAttribute('type')\n    const autocomplete = input.getAttribute('autocomplete')\n    return textInputs[currentType] && !autocomplete\n  })\n  return attachLabels(warnings, container)\n}\n\nconst getInputTypeNumberWarnings = (container) => {\n  const inputs = getElements(container, 'input[type=\"number\"]')\n  return attachLabels(inputs)\n}\n\nconst getInputTypeWarnings = (container) => {\n  const inputs = getElements(container, 'input[type=\"text\"]')\n    .concat(getElements(container, 'input:not([type])'))\n    .filter((input) => !input.getAttribute('inputmode'))\n  return attachLabels(inputs, container)\n}\n\nexport const getInstantWarnings = (container) => ({\n  autocomplete: getAutocompleteWarnings(container),\n  inputType: getInputTypeWarnings(container),\n  inputTypeNumber: getInputTypeNumberWarnings(container),\n})\n\n// SCHEDULED ANALYSES\n// We schedule these so the UI does not lock up while they're running\n\nconst isInside = (dangerZone, bounding) =>\n  bounding.top <= dangerZone.bottom &&\n  bounding.bottom >= dangerZone.top &&\n  bounding.left <= dangerZone.right &&\n  bounding.right >= dangerZone.left\n\nconst toPresent = ({ el, bounding: { width, height }, close }) => ({\n  type:\n    el.nodeName === 'A'\n      ? 'a'\n      : el.nodeName === 'BUTTON'\n      ? 'button'\n      : `${el.nodeName.toLowerCase()}[role=\"button\"]`,\n  path: getDomPath(el),\n  text: el.innerText,\n  html: el.innerHTML,\n  width: Math.floor(width),\n  height: Math.floor(height),\n  close,\n})\n\nexport const MIN_SIZE = 32\nexport const RECOMMENDED_DISTANCE = 8\n//const RECOMMENDED_SIZE = 48\n\nconst checkMinSize = ({ height, width }) =>\n  height < MIN_SIZE || width < MIN_SIZE\n\nfunction* getTouchTargetSizeWarning(container) {\n  const elements = getElements(container, 'button')\n    .concat(getElements(container, '[role=\"button\"]'))\n    .concat(getElements(container, 'a'))\n\n  const suspectElements = Array.from(new Set(elements)).map((el) => [\n    el,\n    el.getBoundingClientRect(),\n  ])\n\n  const len = elements.length\n  const underMinSize = []\n  const tooClose = []\n\n  for (let i = 0; i < len; i++) {\n    const el = elements[i]\n    const bounding = el.getBoundingClientRect()\n\n    const dangerZone = {\n      top: bounding.top - RECOMMENDED_DISTANCE,\n      left: bounding.left - RECOMMENDED_DISTANCE,\n      right: bounding.right + RECOMMENDED_DISTANCE,\n      bottom: bounding.bottom + RECOMMENDED_DISTANCE,\n    }\n\n    const close = suspectElements.filter(\n      ([susEl, susBounding]) =>\n        susEl !== el && isInside(dangerZone, susBounding)\n    )\n\n    const isUnderMinSize = checkMinSize(bounding)\n    if (isUnderMinSize || close.length > 0) {\n      const present = toPresent({ el, bounding, close })\n      if (isUnderMinSize) {\n        underMinSize.push(present)\n      }\n      if (close.length > 0) {\n        tooClose.push(present)\n      }\n    }\n    yield i\n  }\n\n  return { tooClose, underMinSize }\n}\n\nfunction* getTapHighlightWarnings(container) {\n  const buttons = getElements(container, 'button').concat(\n    getElements(container, '[role=\"button\"]')\n  )\n  const links = getElements(container, 'a')\n  const elements = buttons.concat(links)\n  const len = elements.length\n\n  const result = []\n  for (let i = 0; i < len; i++) {\n    const el = elements[i]\n    if (\n      getComputedStyle(el)['-webkit-tap-highlight-color'] === 'rgba(0, 0, 0, 0)'\n    ) {\n      result.push({\n        type: getNodeName(el),\n        text: el.innerText,\n        html: el.innerHTML,\n        path: getDomPath(el),\n      })\n    }\n    yield i\n  }\n\n  return result\n}\n\nconst MAX_WIDTH = 600\n\nfunction* getSrcsetWarnings(container) {\n  const images = getElements(container, 'img')\n  const len = images.length\n\n  const result = []\n\n  for (let i = 0; i < len; i++) {\n    const img = images[i]\n    const srcSet = img.getAttribute('srcset')\n    const src = img.getAttribute('src')\n    if (!srcSet && src) {\n      const isSVG = Boolean(src.match(/svg$/))\n      if (!isSVG) {\n        const isLarge =\n          parseInt(getComputedStyle(img).width, 10) > MAX_WIDTH ||\n          img.naturalWidth > MAX_WIDTH\n        if (isLarge) {\n          result.push({\n            src: img.src,\n            path: getDomPath(img),\n            alt: img.alt,\n          })\n        }\n      }\n    }\n    yield i\n  }\n\n  return result\n}\n\nfunction* getBackgroundImageWarnings(container) {\n  const backgroundImageRegex = /url\\(\".*?(.png|.jpg|.jpeg)\"\\)/\n  const elsWithBackgroundImage = getElements(container, '#root *').filter(\n    (el) => {\n      const style = getComputedStyle(el)\n      return (\n        style['background-image'] &&\n        backgroundImageRegex.test(style['background-image']) &&\n        // HACK\n        // ideally, we would make a new image element and check its \"naturalWidth\"\n        // to get a better idea of the size of the background image, this is a hack\n        el.clientWidth > 200\n      )\n    }\n  )\n\n  if (!elsWithBackgroundImage.length) return []\n\n  const styleDict = new Map()\n\n  Object.keys(container.styleSheets).forEach((k) => {\n    getStylesheetRules(container.styleSheets, k).forEach((rule) => {\n      if (rule) {\n        try {\n          elsWithBackgroundImage.forEach((el) => {\n            if (el.matches(rule.selectorText)) {\n              styleDict.set(el, (styleDict.get(el) || []).concat(rule))\n            }\n          })\n        } catch (e) {\n          // catch errors in safari\n        }\n      }\n    })\n  })\n\n  const responsiveBackgroundImgRegex = /-webkit-min-device-pixel-ratio|min-resolution|image-set/\n\n  const result = []\n  const elements = Array.from(styleDict.entries())\n  const len = elements.length\n\n  for (let i = 0; i < len; i++) {\n    const [el, styles] = elements[i]\n    if (styles) {\n      const requiresResponsiveWarning = styles.some(\n        (style) => !responsiveBackgroundImgRegex.test(style)\n      )\n      if (requiresResponsiveWarning) {\n        const bg = getComputedStyle(el).backgroundImage\n        const src = bg.match(/url\\(\"(.*)\"\\)/)\n          ? bg.match(/url\\(\"(.*)\"\\)/)[1]\n          : undefined\n        result.push({\n          path: getDomPath(el),\n          src,\n        })\n      }\n    }\n    yield i\n  }\n\n  return result\n}\n\nexport const getActiveStyles = function (container, el) {\n  const sheets = container.styleSheets\n  const result = []\n\n  const activeRegex = /:active$/\n\n  Object.keys(sheets).forEach((k) => {\n    getStylesheetRules(sheets, k).forEach((rule) => {\n      if (rule && rule.selectorText && rule.selectorText.match(activeRegex)) {\n        const ruleNoPseudoClass = rule.selectorText.replace(activeRegex, '')\n        try {\n          if (el.matches(ruleNoPseudoClass)) {\n            result.push(rule)\n          }\n        } catch (e) {\n          // safari\n        }\n      }\n    })\n  })\n  return result\n}\n\nfunction* getActiveWarnings(container) {\n  const buttons = getElements(container, 'button').concat(\n    getElements(container, '[role=\"button\"]')\n  )\n  const links = getElements(container, 'a')\n  const elements = buttons.concat(links)\n  const len = elements.length\n  const result = []\n\n  for (let i = 0; i < len; i++) {\n    const el = elements[i]\n    const hasActive = getActiveStyles(container, el)\n    if (hasActive.length) {\n      result.push({\n        type: getNodeName(el),\n        text: el.innerText,\n        html: el.innerHTML,\n        path: getDomPath(el),\n      })\n    }\n    yield i\n  }\n\n  return result\n}\n\nexport const getOriginalStyles = (container, el) => {\n  const sheets = container.styleSheets\n  let result = []\n  Object.keys(sheets).forEach((k) => {\n    const rules = getStylesheetRules(sheets, k)\n    rules.forEach((rule) => {\n      if (rule) {\n        try {\n          if (el.matches(rule.selectorText)) {\n            result.push(rule.cssText)\n          }\n        } catch (e) {\n          // catch errors in safari\n        }\n      }\n    })\n  })\n\n  return result\n}\n\nfunction* get100vhWarnings(container) {\n  const elements = getElements(container, '#root *')\n  const len = elements.length\n  const result = []\n\n  for (let i = 0; i < len; i++) {\n    const el = elements[i]\n    const styles = getOriginalStyles(container, el)\n    const vhWarning = styles.find((style) => /100vh/.test(style))\n    if (vhWarning) {\n      result.push({ el, css: vhWarning, path: getDomPath(el) })\n    }\n    yield i\n  }\n\n  return result\n}\n\nconst schedule = (iterator) => {\n  // 100ms is the threshold where users start to notice UI lag\n  // higher values increase lag but do not noticeably improve processing time so 100ms is the sweet spot\n  const scheduler = createScheduler({ chunkBudget: 100 })\n  const task = scheduler.runTask(iterator)\n  return { task, abort: () => scheduler.abortTask(task) }\n}\n\nexport const getScheduledWarnings = (container, setState, setComplete) => {\n  const analyses = {\n    tapHighlight: schedule(getTapHighlightWarnings(container)),\n    srcset: schedule(getSrcsetWarnings(container)),\n    backgroundImg: schedule(getBackgroundImageWarnings(container)),\n    touchTarget: schedule(getTouchTargetSizeWarning(container)),\n    active: schedule(getActiveWarnings(container)),\n    height: schedule(get100vhWarnings(container)),\n  }\n  const analysesArray = Object.keys(analyses)\n  let remaining = analysesArray.length\n  analysesArray.forEach((key) => {\n    //const start = performance.now()\n    analyses[key].task.then((result) => {\n      //console.log(key, performance.now() - start)\n      setState((prev) => ({ ...prev, [key]: result }))\n      if (--remaining === 0) {\n        setComplete(true)\n      }\n    })\n  })\n  return () => analysesArray.forEach((key) => analyses[key].abort())\n}\n","import React, { Fragment } from 'react'\nimport { styled } from '@storybook/theming'\nimport {\n  getInstantWarnings,\n  getScheduledWarnings,\n  MIN_SIZE,\n  RECOMMENDED_DISTANCE,\n} from './utils'\n\nconst accessibleBlue = '#0965df'\nconst warning = '#bd4700'\n\nconst tagStyles = `\n  padding: .25rem .5rem;\n  font-weight: bold;\n  display:inline-block;\n  border-radius: 10px;\n  margin-bottom: 1rem;\n  svg {\n    margin-right: .25rem;\n    display: inline-block;\n    height: .7rem;\n    line-height: 1;\n    position: relative;\n    top: .03rem;\n    letter-spacing: .01rem;\n  }\n`\n\nconst StyledWarningTag = styled.div`\n  color: ${warning};\n  background-color: hsl(41, 100%, 92%);\n  ${tagStyles}\n`\n\nconst Warning = () => (\n  <StyledWarningTag>\n    <svg\n      aria-hidden=\"true\"\n      focusable=\"false\"\n      role=\"img\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 576 512\"\n    >\n      <path\n        fill=\"currentColor\"\n        d=\"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z\"\n      ></path>\n    </svg>\n    warning\n  </StyledWarningTag>\n)\n\nconst StyledInfoTag = styled.div`\n  ${tagStyles}\n  color: ${accessibleBlue};\n  background-color: hsla(214, 92%, 45%, 0.1);\n`\nconst Hint = () => (\n  <StyledInfoTag>\n    <svg\n      aria-hidden=\"true\"\n      focusable=\"false\"\n      data-prefix=\"fas\"\n      data-icon=\"magic\"\n      role=\"img\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 512 512\"\n      className=\"svg-inline--fa fa-magic fa-w-16 fa-5x\"\n    >\n      <path\n        fill=\"currentColor\"\n        d=\"M224 96l16-32 32-16-32-16-16-32-16 32-32 16 32 16 16 32zM80 160l26.66-53.33L160 80l-53.34-26.67L80 0 53.34 53.33 0 80l53.34 26.67L80 160zm352 128l-26.66 53.33L352 368l53.34 26.67L432 448l26.66-53.33L512 368l-53.34-26.67L432 288zm70.62-193.77L417.77 9.38C411.53 3.12 403.34 0 395.15 0c-8.19 0-16.38 3.12-22.63 9.38L9.38 372.52c-12.5 12.5-12.5 32.76 0 45.25l84.85 84.85c6.25 6.25 14.44 9.37 22.62 9.37 8.19 0 16.38-3.12 22.63-9.37l363.14-363.15c12.5-12.48 12.5-32.75 0-45.24zM359.45 203.46l-50.91-50.91 86.6-86.6 50.91 50.91-86.6 86.6z\"\n        className=\"\"\n      ></path>\n    </svg>\n    hint\n  </StyledInfoTag>\n)\n\nconst Spacer = styled.div`\n  padding: 1rem;\n`\n\nconst StyledTappableContents = styled.div`\n  display: inline-block;\n  padding-top: 0.25rem;\n  height: 2rem;\n  min-width: 1rem;\n  width: auto;\n  background-color: hsla(0, 0%, 50%, 0.1);\n  border-radius: 3px;\n  li {\n    list-style-type: none;\n  }\n  img,\n  svg {\n    max-height: 2rem !important;\n    min-height: 1rem !important;\n    width: auto !important;\n  }\n`\n\nconst DemoImg = styled.img`\n  height: 4rem;\n  width: auto;\n  max-width: 100%;\n  background-color: hsla(0, 0%, 0%, 0.2);\n`\n\nconst ListEntry = styled.li`\n  margin-bottom: 0.5rem;\n  ${(props) => (props.nostyle ? 'list-style-type: none;' : '')};\n`\n\nconst Container = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(25rem, 1fr));\n\n  font-size: ${(props) => props.theme.typography.size.s2}px;\n\n  p {\n    line-height: 1.4;\n  }\n\n  h3 {\n    font-size: ${(props) => props.theme.typography.size.s2}px;\n    font-weight: bold;\n    margin-bottom: 0.5rem;\n    margin-top: 0;\n  }\n\n  code {\n    background: hsla(0, 0%, 50%, 0.1);\n    border-radius: 3px;\n  }\n\n  summary {\n    cursor: pointer;\n    display: block;\n    margin-right: 1rem;\n    padding: 0.2rem 0.3rem;\n    border-radius: 5px;\n    color: ${accessibleBlue};\n    &:focus {\n      outline: none;\n      box-shadow: 0 0 0 3px ${(props) => props.theme.color.mediumlight};\n    }\n  }\n\n  ul {\n    padding-left: 1.25rem;\n    max-height: 12rem;\n    overflow: auto;\n    padding-bottom: 0.5rem;\n    li {\n      margin-bottom: 0.3rem;\n    }\n  }\n  a {\n    text-decoration: none;\n    color: ${accessibleBlue};\n    &:hover {\n      border-bottom: 1px solid ${accessibleBlue};\n    }\n  }\n  > div {\n    border-bottom: 1px solid ${(props) => props.theme.color.medium};\n    border-right: 1px solid ${(props) => props.theme.color.medium};\n  }\n`\n\nconst StyledBanner = styled.div`\n  display: flex;\n  align-items: center;\n  padding: 0 0.75rem;\n  grid-column: 1 / -1;\n  height: 2.875rem;\n`\n\nconst StyledRescanButton = styled.button`\n  margin-left: 0.5rem;\n  border-width: 1px;\n  border-radius: 3px;\n  padding: 0.2rem 0.5rem;\n  cursor: pointer;\n  font-family: inherit;\n  color: inherit;\n  border: none;\n  font-size: 100%;\n  background-color: transparent;\n  appearance: none;\n  box-shadow: none;\n  border: 1px solid;\n  &:hover {\n    background-color: hsla(0, 0%, 0%, 0.15);\n  }\n`\n\nconst Spinner = styled.div`\n  cursor: progress;\n  display: inline-block;\n  overflow: hidden;\n  position: relative;\n  margin-right: 0.7rem;\n  height: 1.25rem;\n  width: 1.25rem;\n  border-width: 2px;\n  border-style: solid;\n  border-radius: 50%;\n  border-color: rgba(97, 97, 97, 0.29);\n  border-top-color: rgb(100, 100, 100);\n  animation: spinner 0.7s linear infinite;\n  mix-blend-mode: difference;\n\n  @keyframes spinner {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n`\n\nconst fixText = 'Learn more'\n\nconst ActiveWarnings = ({ warnings }) => {\n  if (!warnings || !warnings.length) return null\n  return (\n    <Spacer>\n      <Hint />\n      <h3>\n        <code>:active</code> styles on iOS\n      </h3>\n      <p>\n        <code>:active</code> styles will only appear in iOS{' '}\n        <a\n          href=\"https://stackoverflow.com/questions/3885018/active-pseudo-class-doesnt-work-in-mobile-safari\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          if a touch listener is added to the element or one of its ancestors\n        </a>\n        . Once activated in this manner, <code>:active</code> styles (along with{' '}\n        <code>:hover</code> styles) will be applied immediately in iOS when a\n        user taps, possibly creating a confusing UX. (On Android,{' '}\n        <code>:active</code> styles are applied with a slight delay to allow the\n        user to use gestures like scroll without necessarily activating{' '}\n        <code>:active</code> styles.)\n      </p>\n      <ul>\n        {warnings.map((w, i) => (\n          <ListEntry key={i}>\n            <code>{w.type}</code> with content&nbsp;&nbsp;\n            {w.text ? (\n              <b>{w.text}</b>\n            ) : w.html ? (\n              <StyledTappableContents\n                dangerouslySetInnerHTML={{ __html: w.html }}\n              />\n            ) : (\n              '[no text found]'\n            )}\n          </ListEntry>\n        ))}\n      </ul>\n      <details>\n        <summary>{fixText}</summary>\n        <p style={{ marginTop: '1rem' }}>\n          <a\n            href=\"https://stackoverflow.com/questions/3885018/active-pseudo-class-doesnt-work-in-mobile-safari/33681490#33681490\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Relevant Stack Overflow thread\n          </a>\n        </p>\n      </details>\n    </Spacer>\n  )\n}\n\nconst TapWarnings = ({ warnings }) => {\n  if (!warnings || !warnings.length) return null\n  return (\n    <Spacer>\n      <Hint />\n      <h3>Tap style removed from tappable element</h3>\n      <p>\n        These elements have an invisible{' '}\n        <code>-webkit-tap-highlight-color</code>. While this might be\n        intentional, please verify that they have appropriate tap indication\n        styles added through other means.\n      </p>\n      <ul>\n        {warnings.map((w, i) => (\n          <ListEntry key={i}>\n            <code>{w.type}</code> with content&nbsp;&nbsp;\n            {w.text ? (\n              <b>{w.text}</b>\n            ) : w.html ? (\n              <StyledTappableContents\n                dangerouslySetInnerHTML={{ __html: w.html }}\n              />\n            ) : (\n              '[no text found]'\n            )}\n          </ListEntry>\n        ))}\n      </ul>\n      <details>\n        <summary>{fixText}</summary>\n        <p>\n          Some stylesheets remove the tap indication highlight shown on iOS and\n          Android browsers by adding the code{' '}\n          <code>-webkit-tap-highlight-color: transparent</code>. In order to\n          maintain a good mobile experience, tap styles should be added via\n          appropriate <code>:active</code> CSS styles (though, note that{' '}\n          <a\n            href=\"https://stackoverflow.com/questions/3885018/active-pseudo-class-doesnt-work-in-mobile-safari\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            <code>:active</code> styles work inconsistently in iOS\n          </a>\n          ) , or via JavaScript on the <code>touchstart</code> event.\n        </p>\n      </details>\n    </Spacer>\n  )\n}\n\nconst AutocompleteWarnings = ({ warnings }) => {\n  if (!warnings || !warnings.length) return null\n  return (\n    <Spacer>\n      <Warning />\n      <h3>\n        Input with no <code>autocomplete</code> attribute\n      </h3>\n      <p>\n        Most textual inputs should have an explicit <code>autocomplete</code>{' '}\n        attribute.\n      </p>\n      <p>\n        If you truly want to disable autocomplete, try using a{' '}\n        <a\n          href=\"https://bugs.chromium.org/p/chromium/issues/detail?id=468153#c164\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          semantically valid but unique value rather than{' '}\n          <code>autocomplete=&quot;off&quot;</code>\n        </a>\n        , which doesn&apos;t work in Chrome.\n      </p>\n      <p>\n        Note: <code>autocomplete</code> is styled as <code>autoComplete</code>{' '}\n        in JSX.\n      </p>\n      <ul>\n        {warnings.map((w, i) => (\n          <ListEntry key={i}>\n            <code>input type=&quot;{w.type}&quot;</code> and label{' '}\n            <b>{w.labelText || '[no label found]'}</b>\n          </ListEntry>\n        ))}\n      </ul>\n      <details>\n        <summary>{fixText}</summary>\n        <ul>\n          <li>\n            <a\n              href=\"https://developers.google.com/web/updates/2015/06/checkout-faster-with-autofill\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Autocomplete documentation by Google\n            </a>\n          </li>\n          <li>\n            <a\n              href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/autocomplete\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Autocomplete documentation by Mozilla\n            </a>\n          </li>\n        </ul>\n      </details>\n    </Spacer>\n  )\n}\n\nconst InputTypeWarnings = ({ warnings }) => {\n  if (!warnings || !warnings.length) return null\n  return (\n    <Spacer>\n      <Hint />\n\n      <h3>\n        Plain input type <code>text</code> detected\n      </h3>\n      <p>\n        This will render the default text keyboard on mobile (which could very\n        well be what you want!) If you haven&apos;t already, take a moment to\n        make sure this is correct. You can use{' '}\n        <a\n          href=\"https://better-mobile-inputs.netlify.com/\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          this tool\n        </a>{' '}\n        to explore keyboard options.\n      </p>\n      <ul>\n        {warnings.map((w, i) => (\n          <ListEntry key={i}>\n            <code>input type=&quot;{w.type}&quot;</code> and label{' '}\n            <b>{w.labelText || '[no label found]'}</b>\n          </ListEntry>\n        ))}\n      </ul>\n      <details>\n        <summary>{fixText}</summary>\n        <p>\n          <a\n            href=\"https://css-tricks.com/better-form-inputs-for-better-mobile-user-experiences/\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Article reviewing the importance of using correct input types on the\n            mobile web from CSS Tricks.\n          </a>\n        </p>\n      </details>\n    </Spacer>\n  )\n}\n\nconst InputTypeNumberWarnings = ({ warnings }) => {\n  if (!warnings || !warnings.length) return null\n  return (\n    <Spacer>\n      <Hint />\n\n      <h3>\n        Input type <code>number</code> detected\n      </h3>\n      <p>\n        <code>\n          &lt;input type=&quot;text&quot; inputmode=&quot;decimal&quot;/&gt;\n        </code>{' '}\n        could give you improved usability over{' '}\n        <code>&lt;input type=&quot;number&quot; /&gt;</code>.\n      </p>\n      <p>\n        Note: <code>inputmode</code> is styled as <code>inputMode</code> in JSX.{' '}\n      </p>\n      <ul>\n        {warnings.map((w, i) => (\n          <ListEntry key={i}>\n            <code>input type=&quot;{w.type}&quot;</code> and label{' '}\n            <b>{w.labelText || '[no label found]'}</b>\n          </ListEntry>\n        ))}\n      </ul>\n      <details>\n        <summary>{fixText}</summary>\n        <p>\n          <a\n            href=\"https://technology.blog.gov.uk/2020/02/24/why-the-gov-uk-design-system-team-changed-the-input-type-for-numbers/\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Overview of the issues with{' '}\n            <code>input type=&quot;number&quot;</code> from gov.uk.\n          </a>\n        </p>\n      </details>\n    </Spacer>\n  )\n}\n\nconst HeightWarnings = ({ warnings }) => {\n  if (!warnings || !warnings.length) return null\n  return (\n    <Spacer>\n      <Hint />\n      <h3>\n        Usage of <code>100vh</code> CSS\n      </h3>\n      <p>\n        <a\n          href=\"https://chanind.github.io/javascript/2019/09/28/avoid-100vh-on-mobile-web.html\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Viewport units are tricky on mobile.\n        </a>{' '}\n        On some mobile browers, depending on scroll position, <code>100vh</code>{' '}\n        might take up more than 100% of screen height due to browser chrome like\n        the address bar.\n      </p>\n      <ul>\n        {warnings.map(({ path }, i) => (\n          <ListEntry key={i}>\n            <code>{path}</code>\n          </ListEntry>\n        ))}\n      </ul>\n    </Spacer>\n  )\n}\n\nconst BackgroundImageWarnings = ({ warnings }) => {\n  if (!warnings || !warnings.length) return null\n  return (\n    <Spacer>\n      <Warning />\n      <h3>Non-dynamic background image</h3>\n      <p>\n        Downloading larger-than-necessary images hurts performance for users on\n        mobile. You can use{' '}\n        <a\n          href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/image-set\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <code>image-set</code>\n        </a>{' '}\n        to serve an appropriate background image based on the user&apos;s device\n        resolution.\n      </p>\n      <ul>\n        {warnings.map(({ src, alt }, i) => (\n          <ListEntry key={i} nostyle>\n            <div>\n              <DemoImg src={src} alt={alt} />\n            </div>\n          </ListEntry>\n        ))}\n      </ul>\n      <details>\n        <summary>{fixText}</summary>\n        <ul>\n          <li>\n            <a\n              href=\"https://css-tricks.com/responsive-images-css/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Article discussing responsive background images in greater detail,\n              including the interaction of <code>image-set</code> with media\n              queries, from CSS Tricks.\n            </a>\n          </li>\n        </ul>\n      </details>\n    </Spacer>\n  )\n}\n\nconst SrcsetWarnings = ({ warnings }) => {\n  if (!warnings || !warnings.length) return null\n  return (\n    <Spacer>\n      <Warning />\n      <h3>\n        Large image without <code>srcset</code>\n      </h3>\n      <p>\n        Downloading larger-than-necessary images hurts performance for users on\n        mobile. You can use <code>srcset</code> to customize image sizes for\n        different device resolutions and sizes.\n      </p>\n      <ul>\n        {warnings.map(({ src, alt }, i) => (\n          <ListEntry key={i} nostyle>\n            <div>\n              <DemoImg src={src} alt={alt} />\n            </div>\n          </ListEntry>\n        ))}\n      </ul>\n      <details>\n        <summary>{fixText}</summary>\n        <ul>\n          <li>\n            <a\n              href=\"https://cloudfour.com/thinks/responsive-images-the-simple-way\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Summary of the why and how of responsive images\n            </a>\n          </li>\n          <li>\n            <a\n              href=\"https://www.responsivebreakpoints.com/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              A tool to generate responsive images\n            </a>\n          </li>\n        </ul>\n      </details>\n    </Spacer>\n  )\n}\n\nconst TouchTargetWarnings = ({ warnings }) => {\n  if (!warnings) return null\n  const { underMinSize, tooClose } = warnings\n  if (!underMinSize.length && !tooClose.length) return null\n  return (\n    <Spacer>\n      <Warning />\n\n      {Boolean(underMinSize.length) && (\n        <div>\n          <h3>Small touch target</h3>\n          <p>\n            With heights and/or widths of less than {MIN_SIZE}px, these tappable\n            elements could be difficult for users to press:\n          </p>\n          <ul>\n            {underMinSize.map((w, i) => (\n              <ListEntry key={i}>\n                <code>{w.type}</code> with content&nbsp;&nbsp;\n                {w.text ? (\n                  <b>{w.text}</b>\n                ) : w.html ? (\n                  <StyledTappableContents\n                    dangerouslySetInnerHTML={{ __html: w.html }}\n                  />\n                ) : (\n                  '[no text found]'\n                )}\n              </ListEntry>\n            ))}\n          </ul>\n        </div>\n      )}\n      {Boolean(tooClose.length) && (\n        <div>\n          <h3\n            style={{\n              marginTop: underMinSize.length ? '.5rem' : '0',\n            }}\n          >\n            Touch targets close together{' '}\n          </h3>\n          <p>\n            These tappable elements are less than {RECOMMENDED_DISTANCE}px from\n            at least one other tappable element:\n          </p>\n          <ul>\n            {tooClose.map((w, i) => (\n              <ListEntry key={i}>\n                <code>{w.type}</code> with content&nbsp;&nbsp;\n                {w.text ? (\n                  <b>{w.text}</b>\n                ) : w.html ? (\n                  <StyledTappableContents\n                    dangerouslySetInnerHTML={{ __html: w.html }}\n                  />\n                ) : (\n                  '[no text found]'\n                )}\n              </ListEntry>\n            ))}\n          </ul>\n        </div>\n      )}\n      <details>\n        <summary>{fixText}</summary>\n        <ul>\n          <li>\n            <a\n              href=\"https://www.nngroup.com/articles/touch-target-size/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Touch target size article from the Nielsen Norman Group\n            </a>\n          </li>\n          <li>\n            <a\n              href=\"https://web.dev/accessible-tap-targets/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Tap target size recommendations from Google\n            </a>\n          </li>\n        </ul>\n      </details>\n    </Spacer>\n  )\n}\n\nconst convertToBool = (num) => (num > 0 ? 1 : 0)\n\nconst getIssuesFound = (warningCount) =>\n  `${warningCount} issue${warningCount !== 1 ? 's' : ''} found`\n\nexport const Loading = () => (\n  <StyledBanner>\n    <Spinner />\n    <span>Running scan...</span>\n  </StyledBanner>\n)\n\nconst Hints = ({ container }) => {\n  const [warnings, setWarnings] = React.useState(undefined)\n  const [scanComplete, setScanComplete] = React.useState(false)\n  const [rescan, setRescan] = React.useState(0)\n\n  React.useEffect(() => {\n    setScanComplete(false)\n    setWarnings(getInstantWarnings(container))\n    return getScheduledWarnings(container, setWarnings, setScanComplete)\n  }, [container, rescan])\n\n  const warningCount = React.useMemo(\n    () =>\n      warnings\n        ? Object.keys(warnings).reduce((acc, key) => {\n            const curr = warnings[key]\n            const count = Array.isArray(curr)\n              ? convertToBool(curr.length)\n              : //touchTarget returns an object not an array\n                Object.keys(curr)\n                  .map((key) => curr[key])\n                  .reduce((acc, curr) => {\n                    return acc + convertToBool(curr.length)\n                  }, 0)\n            return acc + count\n          }, 0)\n        : 0,\n    [warnings]\n  )\n\n  // Before counting, show the Loading state\n  if (!warnings) {\n    return <Loading />\n  }\n\n  const onRescanClick = () => setRescan((prev) => prev + 1)\n\n  if (warningCount === 0 && scanComplete) {\n    return (\n      <StyledBanner>\n        <span>Scan complete! No issues found.</span>\n        <StyledRescanButton onClick={onRescanClick} type=\"button\">\n          Rescan\n        </StyledRescanButton>\n      </StyledBanner>\n    )\n  }\n\n  const issuesFound = getIssuesFound(warningCount)\n\n  return (\n    <Container>\n      <StyledBanner>\n        {scanComplete ? (\n          <Fragment>\n            <span>Scan complete! {issuesFound}.</span>\n            <StyledRescanButton onClick={onRescanClick} type=\"button\">\n              Rescan\n            </StyledRescanButton>\n          </Fragment>\n        ) : (\n          <Fragment>\n            <Spinner />\n            <span>\n              {warningCount > 0\n                ? `Running scan - ${issuesFound} so far`\n                : 'Running scan'}\n              ...\n            </span>\n          </Fragment>\n        )}\n      </StyledBanner>\n      <TouchTargetWarnings warnings={warnings.touchTarget} />\n      <AutocompleteWarnings warnings={warnings.autocomplete} />\n      <InputTypeWarnings warnings={warnings.inputType} />\n      <InputTypeNumberWarnings warnings={warnings.inputTypeNumber} />\n      <TapWarnings warnings={warnings.tapHighlight} />\n      <ActiveWarnings warnings={warnings.active} />\n      <SrcsetWarnings warnings={warnings.srcset} />\n      <BackgroundImageWarnings warnings={warnings.backgroundImg} />\n      <HeightWarnings warnings={warnings.height} />\n    </Container>\n  )\n}\n\nexport default Hints\n","import React from 'react'\nimport { addons, types } from '@storybook/addons'\nimport { STORY_RENDERED } from '@storybook/core-events'\nimport { useChannel, useAddonState } from '@storybook/api'\nimport { AddonPanel } from '@storybook/components'\nimport Hints, { Loading } from './Hints'\n\nconst ADDON_ID = 'mobile-hints'\nconst PARAM_KEY = 'mobile-hints'\nconst PANEL_ID = `${ADDON_ID}/panel`\n\nconst viewportId = 'storybook/viewport'\nconst noViewport = 'reset'\nconst defaultViewport = 'mobile1'\n\nconst ViewportManager = ({ active }) => {\n  const [viewportState, setViewportState] = useAddonState(viewportId)\n  const cachedState = React.useRef(null)\n  React.useEffect(() => {\n    if (cachedState.current && !active) {\n      setViewportState({\n        selected: cachedState.current,\n      })\n      cachedState.current = null\n    } else {\n      if (active && (!viewportState || viewportState.selected === noViewport)) {\n        cachedState.current = noViewport\n        setViewportState({\n          selected: defaultViewport,\n        })\n      }\n    }\n  }, [active]) // eslint-disable-line\n\n  return null\n}\n\nconst StateWrapper = ({ children }) => {\n  const [storyId, setStoryId] = React.useState('')\n\n  useChannel({\n    [STORY_RENDERED]: (...args) => {\n      setStoryId(args)\n    },\n  })\n  return React.cloneElement(children, {\n    storyId,\n  })\n}\n\nconst getContainer = () => {\n  const iframe = document.getElementById('storybook-preview-iframe')\n  if (!iframe) return null\n  return iframe.contentDocument\n}\n\nconst delay = 2000\nconst MyPanel = ({ active, storyId }) => {\n  const [html, setHTML] = React.useState(undefined)\n\n  React.useEffect(() => {\n    // clear HTML when storyId changes\n    setHTML(undefined)\n    // check for container\n    let timeoutId = undefined\n    const checkContainer = () => {\n      const container = getContainer()\n      if (!container || !container.body) {\n        clearTimeout(timeoutId)\n        timeoutId = setTimeout(checkContainer, delay)\n      } else {\n        setHTML(container.body.innerHTML)\n      }\n    }\n    clearTimeout(timeoutId)\n    timeoutId = setTimeout(checkContainer, delay)\n    return () => clearTimeout(timeoutId)\n  }, [storyId])\n\n  const container = getContainer()\n\n  if (!active) return null\n\n  if (!html || !container) {\n    return <Loading />\n  }\n\n  return <Hints container={container} />\n}\n\naddons.register(ADDON_ID, () => {\n  const render = ({ active, key }) => {\n    return (\n      <React.Fragment key=\"storybook-mobile\">\n        <ViewportManager active={active} />\n        <AddonPanel key={key} active={active}>\n          <StateWrapper active={active}>\n            <MyPanel key={key} active={active} />\n          </StateWrapper>\n        </AddonPanel>\n      </React.Fragment>\n    )\n  }\n  const title = 'Mobile'\n\n  addons.add(PANEL_ID, {\n    type: types.PANEL,\n    title,\n    render,\n    paramKey: PARAM_KEY,\n  })\n})\n"],"names":["getDomPath","el","stack","parentNode","sibCount","sibIndex","i","childNodes","length","sib","nodeName","hasAttribute","id","unshift","toLowerCase","classList","toString","tagName","toFilter","filter","includes","join","getElements","container","tag","Array","from","querySelectorAll","getStylesheetRules","sheets","k","rules","cssRules","e","getNodeName","attachLabels","inputs","map","input","labelText","labels","innerText","parentElement","label","querySelector","path","type","textInputs","text","search","tel","url","email","number","password","getAutocompleteWarnings","warnings","currentType","getAttribute","autocomplete","getInputTypeNumberWarnings","getInputTypeWarnings","concat","isInside","dangerZone","bounding","top","bottom","left","right","toPresent","width","height","close","html","innerHTML","Math","floor","checkMinSize","getTouchTargetSizeWarning","elements","suspectElements","Set","getBoundingClientRect","len","underMinSize","tooClose","susEl","susBounding","isUnderMinSize","present","push","getTapHighlightWarnings","buttons","links","result","getComputedStyle","getSrcsetWarnings","images","img","srcSet","src","Boolean","match","parseInt","naturalWidth","alt","getBackgroundImageWarnings","backgroundImageRegex","elsWithBackgroundImage","style","test","clientWidth","styleDict","Map","Object","keys","styleSheets","forEach","rule","matches","selectorText","set","get","responsiveBackgroundImgRegex","entries","styles","some","bg","backgroundImage","undefined","getActiveStyles","activeRegex","ruleNoPseudoClass","replace","getActiveWarnings","getOriginalStyles","cssText","get100vhWarnings","vhWarning","find","css","schedule","iterator","scheduler","createScheduler","chunkBudget","task","runTask","abort","abortTask","tagStyles","StyledWarningTag","styled","div","Warning","React","focusable","role","xmlns","viewBox","fill","d","StyledInfoTag","Hint","className","Spacer","StyledTappableContents","DemoImg","ListEntry","li","props","nostyle","Container","theme","typography","size","s2","color","mediumlight","medium","StyledBanner","StyledRescanButton","button","Spinner","fixText","ActiveWarnings","href","target","rel","w","key","dangerouslySetInnerHTML","__html","marginTop","TapWarnings","AutocompleteWarnings","InputTypeWarnings","InputTypeNumberWarnings","HeightWarnings","BackgroundImageWarnings","SrcsetWarnings","TouchTargetWarnings","convertToBool","num","Loading","Hints","setWarnings","useState","scanComplete","setScanComplete","rescan","setRescan","useEffect","inputType","inputTypeNumber","getInstantWarnings","setState","setComplete","analyses","tapHighlight","srcset","backgroundImg","touchTarget","active","analysesArray","remaining","then","prev","getScheduledWarnings","warningCount","useMemo","reduce","acc","curr","count","isArray","onRescanClick","onClick","issuesFound","getIssuesFound","Fragment","ViewportManager","viewportState","setViewportState","useAddonState","cachedState","useRef","current","selected","StateWrapper","children","storyId","setStoryId","useChannel","STORY_RENDERED","args","cloneElement","getContainer","iframe","document","getElementById","contentDocument","MyPanel","setHTML","timeoutId","checkContainer","body","clearTimeout","setTimeout","addons","register","add","types","PANEL","title","render","AddonPanel","paramKey"],"mappings":"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"}