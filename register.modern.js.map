{"version":3,"file":"register.modern.js","sources":["src/getDomPath.js","src/utils.js","src/Hints.js","src/register.js"],"sourcesContent":["function getDomPath(el) {\n  var stack = []\n  while (el.parentNode) {\n    let sibCount = 0\n    let sibIndex = 0\n    for (var i = 0; i < el.parentNode.childNodes.length; i++) {\n      var sib = el.parentNode.childNodes[i]\n      if (sib.nodeName === el.nodeName) {\n        if (sib === el) {\n          sibIndex = sibCount\n        }\n        sibCount++\n      }\n    }\n    if (el.hasAttribute('id') && el.id !== '') {\n      stack.unshift(el.nodeName.toLowerCase() + '#' + el.id)\n    } else if (el.classList.toString() !== '' && el.tagName !== 'BODY') {\n      stack.unshift(el.nodeName.toLowerCase() + '.' + el.classList.toString())\n    } else if (sibCount > 1) {\n      stack.unshift(el.nodeName.toLowerCase() + ':eq(' + sibIndex + ')')\n    } else {\n      stack.unshift(el.nodeName.toLowerCase())\n    }\n    el = el.parentNode\n  }\n  const toFilter = ['html', 'body', 'div#root']\n  return stack.filter((el) => !toFilter.includes(el)).join(' > ')\n}\n\nexport default getDomPath\n","import getDomPath from './getDomPath'\nimport {createScheduler} from 'lrt'\n\nconst getElements = (container, tag) =>\n  Array.from(container.querySelectorAll(tag))\n\nconst getStylesheetRules = (sheets, k) => {\n  let rules = []\n  try {\n    rules = sheets[k].rules || sheets[k].cssRules\n  } catch (e) {\n    //\n  }\n  return rules\n}\n\nconst getNodeName = (el) =>\n  el.nodeName === 'A'\n    ? 'a'\n    : el.nodeName === 'BUTTON'\n    ? 'button'\n    : `${el.nodeName.toLowerCase()}[role=\"button\"]`\n\nexport const getActiveStyles = function (container, el) {\n  const sheets = container.styleSheets\n  const result = []\n\n  const activeRegex = /:active$/\n\n  Object.keys(sheets).forEach((k) => {\n    getStylesheetRules(sheets, k).forEach((rule) => {\n      if (!rule) return\n      if (!rule.selectorText || !rule.selectorText.match(activeRegex)) return\n      const ruleNoPseudoClass = rule.selectorText.replace(activeRegex, '')\n      try {\n        if (el.matches(ruleNoPseudoClass)) {\n          result.push(rule)\n        }\n      } catch (e) {\n        // safari\n      }\n    })\n  })\n  return result.length ? result : null\n}\n\nexport const getTapHighlightWarnings = (container) => {\n  const buttons = getElements(container, 'button').concat(\n    getElements(container, '[role=\"button\"]')\n  )\n  const links = getElements(container, 'a')\n\n  const filterActiveStyles = (el) => {\n    const tapHighlight = getComputedStyle(el)['-webkit-tap-highlight-color']\n    if (tapHighlight === 'rgba(0, 0, 0, 0)') return true\n  }\n\n  return buttons\n    .concat(links)\n    .filter(filterActiveStyles)\n    .map((el) => ({\n      type: getNodeName(el),\n      text: el.innerText,\n      html: el.innerHTML,\n      path: getDomPath(el),\n    }))\n}\n\nconst maxWidth = 600\n\nexport const getSrcsetWarnings = (container) => {\n  const images = getElements(container, 'img')\n\n  const warnings = images\n    .filter((img) => {\n      const src = img.getAttribute('src')\n      const srcSet = img.getAttribute('srcset')\n      if (srcSet || !src) return false\n      const isSVG = Boolean(src.match(/svg$/))\n      if (isSVG) return false\n      const isLarge =\n        parseInt(getComputedStyle(img).width, 10) > maxWidth ||\n        img.naturalWidth > maxWidth\n      if (!isLarge) return false\n      return true\n    })\n    .map((img) => {\n      return {\n        src: img.src,\n        path: getDomPath(img),\n        alt: img.alt,\n      }\n    })\n  return warnings\n}\n\nexport const getBackgroundImageWarnings = (container) => {\n  const backgroundImageRegex = /url\\(\".*?(.png|.jpg|.jpeg)\"\\)/\n  const elsWithBackgroundImage = getElements(container, '#root *').filter(\n    (el) => {\n      const style = getComputedStyle(el)\n      if (\n        style['background-image'] &&\n        backgroundImageRegex.test(style['background-image']) &&\n        // HACK\n        // ideally, we would make a new image element and check its \"naturalWidth\"\n        // to get a better idea of the size of the background image, this is a hack\n        el.clientWidth > 200\n      ) {\n        return true\n      }\n    }\n  )\n\n  if (!elsWithBackgroundImage.length) return []\n\n  const styleDict = new Map()\n\n  const sheets = container.styleSheets\n  Object.keys(sheets).forEach((k) => {\n    getStylesheetRules(sheets, k).forEach((rule) => {\n      if (!rule) return\n      try {\n        elsWithBackgroundImage.forEach((el) => {\n          if (el.matches(rule.selectorText)) {\n            styleDict.set(el, (styleDict.get(el) || []).concat(rule))\n          }\n        })\n      } catch (e) {\n        // catch errors in safari\n      }\n    })\n  })\n\n  const responsiveBackgroundImgRegex = /-webkit-min-device-pixel-ratio|min-resolution|image-set/\n\n  const filteredEls = [...styleDict.entries()]\n    .map(([el, styles]) => {\n      if (!styles) return false\n      const requiresResponsiveWarning = styles.reduce((acc, curr) => {\n        if (acc === false) return acc\n        if (responsiveBackgroundImgRegex.test(curr)) return false\n        return true\n      }, true)\n      return requiresResponsiveWarning ? el : false\n    })\n    .filter(Boolean)\n    .map((el) => {\n      const bg = getComputedStyle(el).backgroundImage\n      const src = bg.match(/url\\(\"(.*)\"\\)/)\n        ? bg.match(/url\\(\"(.*)\"\\)/)[1]\n        : undefined\n      return {\n        path: getDomPath(el),\n        src,\n      }\n    })\n\n  return filteredEls\n}\n\nconst textInputs = [\n  'text',\n  'search',\n  'tel',\n  'url',\n  'email',\n  'number',\n  'password',\n]\n\nconst attachLabels = (inputs, container) => {\n  return inputs.map((input) => {\n    let labelText = ''\n    if (input.labels && input.labels[0]) {\n      labelText = input.labels[0].innerText\n    } else if (input.parentElement.nodeName === 'LABEL')\n      labelText = input.parentElement.innerText\n    else if (input.id) {\n      const label = container.querySelector(`label[for=\"${input.id}\"]`)\n      if (label) labelText = label.innerText\n    }\n    return {\n      path: getDomPath(input),\n      labelText,\n      type: input.type,\n    }\n  })\n}\n\nexport const getAutocompleteWarnings = (container) => {\n  const inputs = getElements(container, 'input')\n  const warnings = inputs.filter((input) => {\n    const currentType = input.getAttribute('type')\n    const autocomplete = input.getAttribute('autocomplete')\n    return (!!textInputs.find((type) => currentType === type) && !autocomplete)\n  })\n  return attachLabels(warnings, container)\n}\n\nexport const getInputTypeNumberWarnings = (container) => {\n  const inputs = getElements(container, 'input[type=\"number\"]')\n  return attachLabels(inputs)\n}\n\nexport const getInputTypeWarnings = (container) => {\n  const inputs = getElements(container, 'input[type=\"text\"]')\n    .concat(getElements(container, 'input:not([type])'))\n    .filter((input) => !input.getAttribute('inputmode'))\n  return attachLabels(inputs, container)\n}\n\nconst isInside = (dangerZone, boundingBox) => {\n  return (\n    boundingBox.top <= dangerZone.bottom &&\n    boundingBox.bottom >= dangerZone.top &&\n    boundingBox.left <= dangerZone.right &&\n    boundingBox.right >= dangerZone.left\n  )\n}\nexport const getTouchTargetSizeWarning = ({\n  container,\n  minSize,\n  recommendedDistance,\n}) => {\n  const els = getElements(container, 'button')\n    .concat(getElements(container, '[role=\"button\"]'))\n    .concat(getElements(container, 'a'))\n    .map((el) => [el, el.getBoundingClientRect()])\n\n  const suspectEls = new Set([...els])\n\n  const elsWithClose = els\n    .map(([el1, bounding1]) => {\n      const dangerZone = {\n        top: bounding1.top - recommendedDistance,\n        left: bounding1.left - recommendedDistance,\n        right: bounding1.right + recommendedDistance,\n        bottom: bounding1.bottom + recommendedDistance,\n      }\n\n      const close = Array.from(suspectEls)\n        .filter(([el, boundingBox]) => {\n          if (el === el1) return false\n          if (isInside(dangerZone, boundingBox)) {\n            return el\n          }\n          return false\n        })\n\n      return { close: close ? close : null, el: el1, boundingBox: bounding1 }\n    })\n\n  const underMinSize = elsWithClose.filter(\n    ({ boundingBox: { width, height } }) => {\n      return width < minSize || height < minSize\n    }\n  )\n\n  const tooClose = elsWithClose.filter(({ close }) => {\n    return close && close.length\n  })\n\n  const present = ({ el, boundingBox: { width, height }, close }) => {\n    return {\n      type:\n        el.nodeName === 'A'\n          ? 'a'\n          : el.nodeName === 'BUTTON'\n          ? 'button'\n          : `${el.nodeName.toLowerCase()}[role=\"button\"]`,\n      path: getDomPath(el),\n      text: el.innerText,\n      html: el.innerHTML,\n      width: Math.floor(width),\n      height: Math.floor(height),\n      close,\n    }\n  }\n\n  return {\n    underMinSize: underMinSize.map(present),\n    tooClose: tooClose.map(present),\n  }\n}\n\nexport const getTooWideWarnings = (container) => {\n  const containerWidth = container.body.clientWidth\n  const allElements = getElements(container, '#root *')\n  return allElements\n    .filter((el) => {\n      return el.clientWidth > containerWidth\n    })\n    .map((el) => {\n      return {\n        el,\n        path: getDomPath(el),\n      }\n    })\n}\n\nfunction* activeIterator(container) {\n  const buttons = getElements(container, 'button').concat(\n    getElements(container, '[role=\"button\"]')\n  )\n  const links = getElements(container, 'a')\n  const elements = buttons.concat(links)\n  const len = elements.length\n  const result = []\n\n  for (let i = 0; i < len; i++) {\n    const el = elements[i]\n    const hasActive = getActiveStyles(container, el);\n    if (hasActive) {\n      result.push({\n        type: getNodeName(el),\n        text: el.innerText,\n        html: el.innerHTML,\n        path: getDomPath(el),\n      });\n    }\n    yield\n  }\n\n  return result\n}\n\nexport const getActiveWarnings = (container) => {\n  const scheduler = createScheduler()\n  const task = scheduler.runTask(activeIterator(container))\n  return {abortTask: () => scheduler.abortTask(task), task}\n}\n\nexport const getOriginalStyles = (container, el) => {\n  const sheets = container.styleSheets\n  let result = []\n  Object.keys(sheets).forEach((k) => {\n    const rules = getStylesheetRules(sheets, k)\n    rules.forEach((rule) => {\n      if (rule) {\n        try {\n          if (el.matches(rule.selectorText)) {\n            result.push(rule.cssText)\n          }\n        } catch (e) {\n          // catch errors in safari\n        }\n      }\n    })\n  })\n  return result\n}\n\nfunction* vhIterator(container) {\n  const elements = getElements(container, '#root *')\n  const len = elements.length\n  const result = []\n\n  for (let i = 0; i < len; i++) {\n    const el = elements[i]\n    const styles = getOriginalStyles(container, el)\n    const vhWarning = styles.find((style) => /100vh/.test(style))\n    if (vhWarning) {\n      result.push( { el, css: vhWarning, path: getDomPath(el) })\n    }\n    yield\n  }\n  return result\n}\n\nexport const get100vhWarnings = (container) => {\n  const scheduler = createScheduler()\n  const task = scheduler.runTask(vhIterator(container))\n  return {abortTask: () => scheduler.abortTask(task), task}\n}\n\nexport const getFastWarnings = ({\n  container,\n  minSize,\n  recommendedSize,\n  recommendedDistance,\n}) => ({\n  tapHighlight: getTapHighlightWarnings(container),\n  autocomplete: getAutocompleteWarnings(container),\n  inputType: getInputTypeWarnings(container),\n  srcset: getSrcsetWarnings(container),\n  backgroundImg: getBackgroundImageWarnings(container),\n  inputTypeNumber: getInputTypeNumberWarnings(container),\n  touchTarget: getTouchTargetSizeWarning({\n    container,\n    minSize,\n    recommendedSize,\n    recommendedDistance,\n  }),\n  // tooWide: getTooWideWarnings(container),\n})\n","import React, { Fragment } from 'react'\nimport styled, { ThemeProvider } from 'styled-components'\nimport { withTheme } from 'emotion-theming'\nimport { getActiveWarnings, getFastWarnings, get100vhWarnings } from './utils'\n\nconst recommendedSize = 48\nconst minSize = 32\nconst recommendedDistance = 8\n\nconst accessibleBlue = '#0965df'\nconst warning = '#bd4700'\n\nconst tagStyles = `\n  padding: .25rem .5rem;\n  font-weight: bold;\n  display:inline-block;\n  border-radius: 10px;\n  margin-bottom: 1rem;\n  svg {\n    margin-right: .25rem;\n    display: inline-block;\n    height: .7rem;\n    line-height: 1;\n    position: relative;\n    top: .03rem;\n    letter-spacing: .01rem;\n  }\n`\n\nconst StyledWarningTag = styled.div`\n  color: ${warning};\n  background-color: hsl(41, 100%, 92%);\n  ${tagStyles}\n`\n\nconst Warning = () => {\n  return (\n    <StyledWarningTag>\n      <svg\n        aria-hidden=\"true\"\n        focusable=\"false\"\n        role=\"img\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 576 512\"\n      >\n        <path\n          fill=\"currentColor\"\n          d=\"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z\"\n        ></path>\n      </svg>\n      warning\n    </StyledWarningTag>\n  )\n}\n\nconst StyledInfoTag = styled.div`\n  ${tagStyles}\n  color: ${accessibleBlue};\n  background-color: hsla(214, 92%, 45%, 0.1);\n`\nconst Hint = () => {\n  return (\n    <StyledInfoTag>\n      <svg\n        aria-hidden=\"true\"\n        focusable=\"false\"\n        data-prefix=\"fas\"\n        data-icon=\"magic\"\n        role=\"img\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 512 512\"\n        className=\"svg-inline--fa fa-magic fa-w-16 fa-5x\"\n      >\n        <path\n          fill=\"currentColor\"\n          d=\"M224 96l16-32 32-16-32-16-16-32-16 32-32 16 32 16 16 32zM80 160l26.66-53.33L160 80l-53.34-26.67L80 0 53.34 53.33 0 80l53.34 26.67L80 160zm352 128l-26.66 53.33L352 368l53.34 26.67L432 448l26.66-53.33L512 368l-53.34-26.67L432 288zm70.62-193.77L417.77 9.38C411.53 3.12 403.34 0 395.15 0c-8.19 0-16.38 3.12-22.63 9.38L9.38 372.52c-12.5 12.5-12.5 32.76 0 45.25l84.85 84.85c6.25 6.25 14.44 9.37 22.62 9.37 8.19 0 16.38-3.12 22.63-9.37l363.14-363.15c12.5-12.48 12.5-32.75 0-45.24zM359.45 203.46l-50.91-50.91 86.6-86.6 50.91 50.91-86.6 86.6z\"\n          className=\"\"\n        ></path>\n      </svg>\n      hint\n    </StyledInfoTag>\n  )\n}\n\nconst Spacer = styled.div`\n  padding: 1rem;\n`\n\nconst StyledTappableContents = styled.div`\n  display: inline-block;\n  padding-top: 0.25rem;\n  height: 2rem;\n  min-width: 1rem;\n  width: auto;\n  background-color: hsla(0, 0%, 50%, 0.1);\n  border-radius: 3px;\n  li {\n    list-style-type: none;\n  }\n  img,\n  svg {\n    max-height: 2rem !important;\n    min-height: 1rem !important;\n    width: auto !important;\n  }\n`\n\nconst DemoImg = styled.img`\n  height: 4rem;\n  width: auto;\n  max-width: 100%;\n  background-color: hsla(0, 0%, 0%, 0.2);\n`\n\nconst ListEntry = styled.li`\n  margin-bottom: 0.5rem;\n  ${(props) => (props.nostyle ? 'list-style-type: none;' : '')};\n`\n\nconst Container = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(25rem, 1fr));\n\n  font-size: ${(props) => props.theme.typography.size.s2}px;\n\n  p {\n    line-height: 1.4;\n  }\n\n  h3 {\n    font-size: ${(props) => props.theme.typography.size.s2}px;\n    font-weight: bold;\n    margin-bottom: 0.5rem;\n    margin-top: 0;\n  }\n\n  code {\n    background: hsla(0, 0%, 50%, 0.1);\n    border-radius: 3px;\n  }\n\n  summary {\n    cursor: pointer;\n    display: block;\n    margin-right: 1rem;\n    padding: 0.2rem 0.3rem;\n    border-radius: 5px;\n    color: ${accessibleBlue};\n    &:focus {\n      outline: none;\n      box-shadow: 0 0 0 3px ${(props) => props.theme.color.mediumlight};\n    }\n  }\n\n  ul {\n    padding-left: 1.25rem;\n    max-height: 12rem;\n    overflow: auto;\n    padding-bottom: 0.5rem;\n    li {\n      margin-bottom: 0.3rem;\n    }\n  }\n  a {\n    text-decoration: none;\n    color: ${accessibleBlue};\n    &:hover {\n      border-bottom: 1px solid ${accessibleBlue};\n    }\n  }\n  > div {\n    border-bottom: 1px solid ${(props) => props.theme.color.medium};\n    border-right: 1px solid ${(props) => props.theme.color.medium};\n  }\n`\n\nconst StyledBanner = styled.div`\n  display: flex;\n  align-items: center;\n  padding: 0 0.75rem;\n  grid-column: 1 / -1;\n  height: 2.875rem;\n`\n\nconst StyledRescanButton = styled.button`\n  margin-left: 1rem;\n  border-width: 1px;\n  border-radius: 3px;\n  padding: .2rem .5rem;\n  cursor: pointer;\n  font-family: inherit;\n  color: inherit;\n  border: none;\n  font-size: 100%;\n  background-color: transparent;\n  appearance: none;\n  box-shadow: none;\n  border: 1px solid;\n  &:hover {\n    background-color: hsla(0, 0%, 0%, 0.15)\n  }\n`\n\nconst fixText = 'Learn more'\n\nconst ActiveWarnings = ({ warnings }) => {\n  if (!warnings.length) return null\n  return (\n    <Spacer>\n      <Hint />\n      <h3>\n        <code>:active</code> styles on iOS\n      </h3>\n      <p>\n        <code>:active</code> styles will only appear in iOS{' '}\n        <a\n          href=\"https://stackoverflow.com/questions/3885018/active-pseudo-class-doesnt-work-in-mobile-safari\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          if a touch listener is added to the element or one of its ancestors\n        </a>\n        . Once activated in this manner, <code>:active</code> styles (along with{' '}\n        <code>:hover</code> styles) will be applied immediately in iOS when a\n        user taps, possibly creating a confusing UX. (On Android,{' '}\n        <code>:active</code> styles are applied with a slight delay to allow the\n        user to use gestures like scroll without necessarily activating{' '}\n        <code>:active</code> styles.)\n      </p>\n      <ul>\n        {warnings.map((w, i) => {\n          return (\n            <ListEntry key={i}>\n              <code>{w.type}</code> with content{' '}\n              {w.text ? (\n                <b>{w.text}</b>\n              ) : w.html ? (\n                <StyledTappableContents\n                  dangerouslySetInnerHTML={{ __html: w.html }}\n                />\n              ) : (\n                '[no text found]'\n              )}\n            </ListEntry>\n          )\n        })}\n      </ul>\n      <details>\n        <summary>{fixText}</summary>\n        <p style={{ marginTop: '1rem' }}>\n          <a\n            href=\"https://stackoverflow.com/questions/3885018/active-pseudo-class-doesnt-work-in-mobile-safari/33681490#33681490\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Relevant Stack Overflow thread\n          </a>\n        </p>\n      </details>\n    </Spacer>\n  )\n}\n\nconst TapWarnings = ({ warnings }) => {\n  if (!warnings.length) return null\n  return (\n    <Spacer>\n      <Hint />\n      <h3>Tap style removed from tappable element</h3>\n      <p>\n        These elements have an invisible{' '}\n        <code>-webkit-tap-highlight-color</code>. While this might be\n        intentional, please verify that they have appropriate tap indication\n        styles added through other means.\n      </p>\n      <ul>\n        {warnings.map((w, i) => {\n          return (\n            <ListEntry key={i}>\n              <code>{w.type}</code> with content{' '}\n              {w.text ? (\n                <b>{w.text}</b>\n              ) : w.html ? (\n                <StyledTappableContents\n                  dangerouslySetInnerHTML={{ __html: w.html }}\n                />\n              ) : (\n                '[no text found]'\n              )}\n            </ListEntry>\n          )\n        })}\n      </ul>\n      <details>\n        <summary>{fixText}</summary>\n        <p>\n          Some stylesheets remove the tap indication highlight shown on iOS and\n          Android browsers by adding the code{' '}\n          <code>-webkit-tap-highlight-color: transparent</code>. In order to\n          maintain a good mobile experience, tap styles should be added via\n          appropriate <code>:active</code> CSS styles (though, note that{' '}\n          <a\n            href=\"https://stackoverflow.com/questions/3885018/active-pseudo-class-doesnt-work-in-mobile-safari\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            <code>:active</code> styles work inconsistently in iOS\n          </a>) , or via JavaScript on the <code>touchstart</code> event.\n        </p>\n      </details>\n    </Spacer>\n  )\n}\n\nconst AutocompleteWarnings = ({ warnings }) => {\n  if (!warnings.length) return null\n  return (\n    <Spacer>\n      <Warning />\n      <h3>\n        Input with no <code>autocomplete</code> attribute\n      </h3>\n      <p>\n        Most textual inputs should have an explicit <code>autocomplete</code>{' '}\n        attribute.\n      </p>\n      <p>\n        If you truly want to disable autocomplete, try using a{' '}\n        <a\n          href=\"https://bugs.chromium.org/p/chromium/issues/detail?id=468153#c164\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          semantically valid but unique value rather than{' '}\n          <code>autocomplete=&quot;off&quot;</code>\n        </a>\n        , which doesn&apos;t work in Chrome.\n      </p>\n      <p>\n        Note: <code>autocomplete</code> is styled as <code>autoComplete</code>{' '}\n        in JSX.\n      </p>\n      <ul>\n        {warnings.map((w, i) => {\n          return (\n            <ListEntry key={i}>\n              <code>input type=&quot;{w.type}&quot;</code> and label{' '}\n              <b>{w.labelText || '[no label found]'}</b>\n            </ListEntry>\n          )\n        })}\n      </ul>\n      <details>\n        <summary>{fixText}</summary>\n        <ul>\n          <li>\n            <a\n              href=\"https://developers.google.com/web/updates/2015/06/checkout-faster-with-autofill\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Autocomplete documentation by Google\n            </a>\n          </li>\n          <li>\n            <a\n              href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/autocomplete\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Autocomplete documentation by Mozilla\n            </a>\n          </li>\n        </ul>\n      </details>\n    </Spacer>\n  )\n}\n\nconst InputTypeWarnings = ({ warnings }) => {\n  if (!warnings.length) return null\n  return (\n    <Spacer>\n      <Hint />\n\n      <h3>\n        Plain input type <code>text</code> detected\n      </h3>\n      <p>\n        This will render the default text keyboard on mobile (which could very\n        well be what you want!) If you haven&apos;t already, take a moment to\n        make sure this is correct. You can use{' '}\n        <a\n          href=\"https://better-mobile-inputs.netlify.com/\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >this tool</a> to\n        explore keyboard options.\n      </p>\n      <ul>\n        {warnings.map((w, i) => {\n          return (\n            <ListEntry key={i}>\n              <code>input type=&quot;{w.type}&quot;</code> and label{' '}\n              <b>{w.labelText || '[no label found]'}</b>\n            </ListEntry>\n          )\n        })}\n      </ul>\n      <details>\n        <summary>{fixText}</summary>\n        <p>\n          <a\n            href=\"https://css-tricks.com/better-form-inputs-for-better-mobile-user-experiences/\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Article reviewing the importance of using correct input types on the\n            mobile web from CSS Tricks.\n          </a>\n        </p>\n      </details>\n    </Spacer>\n  )\n}\n\nconst InputTypeNumberWarnings = ({ warnings }) => {\n  if (!warnings.length) return null\n  return (\n    <Spacer>\n      <Hint />\n\n      <h3>\n        Input type <code>number</code> detected\n      </h3>\n      <p>\n        <code>\n          &lt;input type=&quot;text&quot; inputmode=&quot;decimal&quot;/&gt;\n        </code>{' '}\n        could give you improved usability over{' '}\n        <code>&lt;input type=&quot;number&quot; /&gt;</code>.\n      </p>\n      <p>\n        Note: <code>inputmode</code> is styled as <code>inputMode</code> in JSX.{' '}\n      </p>\n      <ul>\n        {warnings.map((w, i) => {\n          return (\n            <ListEntry key={i}>\n              <code>input type=&quot;{w.type}&quot;</code> and label{' '}\n              <b>{w.labelText || '[no label found]'}</b>\n            </ListEntry>\n          )\n        })}\n      </ul>\n      <details>\n        <summary>{fixText}</summary>\n        <p>\n          <a\n            href=\"https://technology.blog.gov.uk/2020/02/24/why-the-gov-uk-design-system-team-changed-the-input-type-for-numbers/\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Overview of the issues with{' '}\n            <code>input type=&quot;number&quot;</code> from gov.uk.\n          </a>\n        </p>\n      </details>\n    </Spacer>\n  )\n}\n\n// const TooWideWarnings = ({ warnings }) => {\n//   if (!warnings.length) return null\n\n//   const title = `Element${\n//     warnings.length > 1 ? 's' : ''\n//   } introducing horizontal overflow`\n\n//   return (\n//     <Spacer>\n//       <Hint />\n//       <h3>{title}</h3>\n//       <p>\n//         The following element{warnings.length > 1 ? 's' : ''} had a width that\n//         exceeded that of the page, possibly introducing a horizontal scroll.\n//         While this may be intentional, please verify that this is not an error.\n//       </p>\n//       <LogToConsole title={title} els={warnings.map((w) => w.el)} />\n//       <div>\n//         {warnings.map(({ path }, i) => {\n//           return (\n//             <ListEntry key={i} style={{ marginBottom: '1rem' }} as=\"div\">\n//               <code>{path}</code>\n//             </ListEntry>\n//           )\n//         })}\n//       </div>\n//     </Spacer>\n//   )\n// }\n\nconst HeightWarnings = ({ warnings }) => {\n  if (!warnings.length) return null\n  return (\n    <Spacer>\n      <Hint />\n      <h3>\n        Usage of <code>100vh</code> CSS\n      </h3>\n      <p>\n        Viewport units are{' '}\n        <a\n          href=\"https://chanind.github.io/javascript/2019/09/28/avoid-100vh-on-mobile-web.html\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          tricky on mobile.\n        </a>{' '}\n        On some mobile browers, depending on scroll position, <code>100vh</code>{' '}\n        might take up more than 100% of screen height due to browser chrome like\n        the address bar.\n      </p>\n      <ul>\n        {warnings.map(({ path }, i) => {\n          return (\n            <ListEntry key={i}>\n              <code>{path}</code>\n            </ListEntry>\n          )\n        })}\n      </ul>\n    </Spacer>\n  )\n}\n\nconst BackgroundImageWarnings = ({ warnings }) => {\n  if (!warnings.length) return null\n  return (\n    <Spacer>\n      <Warning />\n      <h3>Non-dynamic background image</h3>\n      <p>\n        Downloading larger-than-necessary images hurts performance for users on\n        mobile. You can use{' '}\n        <a\n          href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/image-set\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <code>image-set</code>\n        </a>{' '}\n        to serve an appropriate background image based on the user&apos;s device\n        resolution.\n      </p>\n      <ul>\n        {warnings.map(({ src, alt }, i) => {\n          return (\n            <ListEntry key={i} nostyle>\n              <div>\n                <DemoImg src={src} alt={alt} />\n              </div>\n            </ListEntry>\n          )\n        })}\n      </ul>\n      <details>\n        <summary>{fixText}</summary>\n        <ul>\n          <li>\n            <a\n              href=\"https://css-tricks.com/responsive-images-css/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Article discussing responsive background images in greater detail,\n              including the interaction of <code>image-set</code> with media\n              queries, from CSS Tricks.\n            </a>\n          </li>\n        </ul>\n      </details>\n    </Spacer>\n  )\n}\n\nconst SrcsetWarnings = ({ warnings }) => {\n  if (!warnings.length) return null\n  return (\n    <Spacer>\n      <Warning />\n      <h3>\n        Large image without <code>srcset</code>\n      </h3>\n      <p>\n        Downloading larger-than-necessary images hurts performance for users on\n        mobile. You can use <code>srcset</code> to customize image sizes for\n        different device resolutions and sizes.\n      </p>\n      <ul>\n        {warnings.map(({ src, alt }, i) => {\n          return (\n            <ListEntry key={i} nostyle>\n              <div>\n                <DemoImg src={src} alt={alt} />\n              </div>\n            </ListEntry>\n          )\n        })}\n      </ul>\n      <details>\n        <summary>{fixText}</summary>\n        <ul>\n          <li>\n            <a\n              href=\"https://cloudfour.com/thinks/responsive-images-the-simple-way\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Summary of the why and how of responsive images\n            </a>\n          </li>\n          <li>\n            <a\n              href=\"https://www.responsivebreakpoints.com/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              A tool to generate responsive images\n            </a>\n          </li>\n        </ul>\n      </details>\n    </Spacer>\n  )\n}\n\nconst TouchTargetWarnings = ({ warnings: { underMinSize, tooClose } }) => {\n  if (!underMinSize.length && !tooClose.length) return null\n  return (\n    <Spacer>\n      <Warning />\n\n      {Boolean(underMinSize.length) && (\n        <div>\n          <h3>Small touch target</h3>\n          <p>\n            With heights and/or widths of less than {minSize}px, these tappable\n            elements could be difficult for users to press:\n          </p>\n          <ul>\n            {underMinSize.map((w, i) => {\n              return (\n                <ListEntry key={i}>\n                  <code>{w.type}</code> with content{' '}\n                  {w.text ? (\n                    <b>{w.text}</b>\n                  ) : w.html ? (\n                    <StyledTappableContents\n                      dangerouslySetInnerHTML={{ __html: w.html }}\n                    />\n                  ) : (\n                    '[no text found]'\n                  )}\n                </ListEntry>\n              )\n            })}\n          </ul>\n        </div>\n      )}\n      {Boolean(tooClose.length) && (\n        <div>\n          <h3\n            style={{\n              marginTop: underMinSize.length ? '.5rem' : '0',\n            }}\n          >\n            Touch targets close together{' '}\n          </h3>\n          <p>\n            These tappable elements are less than {recommendedDistance}px from at least one other\n            tappable element:\n          </p>\n          <ul>\n            {tooClose.map((w, i) => {\n              return (\n                <ListEntry key={i}>\n                  <code>{w.type}</code> with content{' '}\n                  {w.text ? (\n                    <b>{w.text}</b>\n                  ) : w.html ? (\n                    <StyledTappableContents\n                      dangerouslySetInnerHTML={{ __html: w.html }}\n                    />\n                  ) : (\n                    '[no text found]'\n                  )}\n                </ListEntry>\n              )\n            })}\n          </ul>\n        </div>\n      )}\n      <details>\n        <summary>{fixText}</summary>\n        <ul>\n          <li>\n            <a\n              href=\"https://www.nngroup.com/articles/touch-target-size/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Touch target size article from the Nielsen Norman Group\n            </a>\n          </li>\n          <li>\n            <a\n              href=\"https://web.dev/accessible-tap-targets/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Tap target size recommendations from Google\n            </a>\n          </li>\n        </ul>\n      </details>\n    </Spacer>\n  )\n}\n\nconst convertToBool = (num) => (num > 0 ? 1 : 0)\n\nconst Wrapper = ({ theme, children }) => {\n  return (\n    <ThemeProvider theme={theme}>\n      <Container>{children}</Container>\n    </ThemeProvider>\n  )\n}\n\nexport const Loading = withTheme(({theme}) => (\n  <Wrapper theme={theme}>\n    <StyledBanner>Running scan...</StyledBanner>\n  </Wrapper>\n))\n\nconst Hints = ({ container, theme }) => {\n  const [warnings, setWarnings] = React.useState(undefined)\n  const [rescan, setRescan] = React.useState(0)\n\n  React.useEffect(() => {\n    setWarnings(getFastWarnings({\n      container,\n      minSize,\n      recommendedDistance,\n      recommendedSize\n    }))\n    const schedule100vh = get100vhWarnings(container)\n    const scheduleActive = getActiveWarnings(container)\n    schedule100vh.task.then((height) => {\n      setWarnings(prev => ({...prev, height}))\n    })\n    scheduleActive.task.then((active) => {\n      setWarnings(prev => ({...prev, active}))\n    })\n    return () => {\n      schedule100vh.abortTask();\n      scheduleActive.abortTask();\n    }\n  }, [container, rescan])\n\n  const warningCount = React.useMemo(() => warnings ? Object.keys(warnings)\n      .reduce((acc, key) => {\n        const curr = warnings[key]\n        const count = Array.isArray(curr)\n          ? convertToBool(curr.length)\n          : //touchTarget returns an object not an array\n          Object.keys(curr)\n            .map((key) => curr[key])\n            .reduce((acc, curr) => {\n              return acc + convertToBool(curr.length)\n            }, 0)\n        return acc + count\n      }, 0) : 0\n  , [warnings])\n\n  React.useEffect(() => {\n    const tab = Array.from(\n      document.querySelectorAll('button[role=\"tab\"]')\n    ).find((el) => /^Mobile(\\s\\(\\d+\\))?$/.test(el.innerText))\n    if (tab) {\n      if (warningCount === 0) {\n        tab.innerText = 'Mobile'\n      } else {\n        tab.innerText = `Mobile (${warningCount})`\n      }\n    }\n    return () => tab.innerText = 'Mobile'\n  }, [warningCount])\n\n  const scanComplete = React.useMemo(() =>\n    !!(warnings && warnings.active && warnings.height),\n    [warnings])\n\n  // Before counting, show the Loading state\n  if (!warnings) {\n    return <Loading />\n  }\n\n  const onRescanClick = () => setRescan(prev => prev + 1)\n\n  if (warningCount === 0 && scanComplete) {\n    return (\n      <Wrapper theme={theme}>\n        <StyledBanner>\n          <span>Looking good! No mobile hints available.</span>\n          <StyledRescanButton onClick={onRescanClick} type=\"button\">\n            Rescan\n          </StyledRescanButton>\n        </StyledBanner>\n      </Wrapper>\n    )\n  }\n\n  return (\n    <ThemeProvider theme={theme}>\n      <Container>\n        <StyledBanner>\n          {scanComplete ? (\n            <Fragment>\n              <span>\n                Scan complete!\n              </span>\n              <StyledRescanButton onClick={onRescanClick} type=\"button\">\n                Rescan\n              </StyledRescanButton>\n            </Fragment>\n          ) : (\n            <span>\n              Preliminary results shown, still scanning...\n            </span>\n          )}\n        </StyledBanner>\n        <TouchTargetWarnings warnings={warnings.touchTarget} />\n        <AutocompleteWarnings warnings={warnings.autocomplete} />\n        {/* <TooWideWarnings warnings={warnings.tooWide} container={container} /> */}\n        <InputTypeWarnings warnings={warnings.inputType} />\n        <InputTypeNumberWarnings warnings={warnings.inputTypeNumber} />\n        {warnings.height && <HeightWarnings warnings={warnings.height} />}\n        <TapWarnings warnings={warnings.tapHighlight} />\n        {warnings.active && <ActiveWarnings warnings={warnings.active} />}\n        <SrcsetWarnings warnings={warnings.srcset} />\n        <BackgroundImageWarnings warnings={warnings.backgroundImg} />\n      </Container>\n    </ThemeProvider>\n  )\n}\n\nexport default withTheme(Hints)\n","import React from 'react'\nimport { addons, types } from '@storybook/addons'\nimport { STORY_RENDERED } from '@storybook/core-events'\nimport { useChannel, useAddonState } from '@storybook/api'\nimport { AddonPanel } from '@storybook/components'\nimport Hints, { Loading } from './Hints'\n\nconst ADDON_ID = 'mobile-hints'\nconst PARAM_KEY = 'mobile-hints'\nconst PANEL_ID = `${ADDON_ID}/panel`\n\nconst viewportId = 'storybook/viewport'\nconst noViewport = 'reset'\nconst defaultViewport = 'mobile1'\n\nconst ViewportManager = ({ active }) => {\n  const [viewportState, setViewportState] = useAddonState(viewportId)\n  const cachedState = React.useRef(null)\n  React.useEffect(() => {\n    if (cachedState.current && !active) {\n      setViewportState({\n        selected: cachedState.current,\n      })\n      cachedState.current = null\n    } else {\n      if (active && (!viewportState || viewportState.selected === noViewport)) {\n        cachedState.current = noViewport\n        setViewportState({\n          selected: defaultViewport,\n        })\n      }\n    }\n  }, [active]) // eslint-disable-line\n\n  return null\n}\n\nconst StateWrapper = ({ children }) => {\n  const [storyId, setStoryId] = React.useState('')\n\n  useChannel({\n    [STORY_RENDERED]: (...args) => {\n      setStoryId(args)\n    }\n  })\n  return React.cloneElement(children, {\n    storyId,\n  })\n}\n\nconst getContainer = () => {\n  const iframe = document.getElementById('storybook-preview-iframe')\n  if (!iframe) return null\n  return iframe.contentDocument\n}\n\nconst delay = 2000\nconst MyPanel = ({ storyId }) => {\n  const [html, setHTML] = React.useState(undefined)\n\n  React.useEffect(() => {\n    // clear HTML when storyId changes\n    setHTML(undefined)\n    // check for container\n    let timeoutId = undefined\n    const checkContainer = () => {\n      const container = getContainer()\n      if (!container || !container.body) {\n        clearTimeout(timeoutId)\n        timeoutId = setTimeout(checkContainer, delay)\n      } else {\n        setHTML(container.body.innerHTML)\n      }\n    }\n    clearTimeout(timeoutId)\n    timeoutId = setTimeout(checkContainer, delay)\n    return () => clearTimeout(timeoutId)\n  }, [storyId])\n\n  const container = getContainer()\n\n  if (!html || !container) {\n    return <Loading />\n  }\n\n  return <Hints container={container} />\n}\n\naddons.register(ADDON_ID, () => {\n  const render = ({ active, key }) => {\n    return (\n      <React.Fragment key=\"storybook-mobile\">\n        <ViewportManager active={active} />\n        <AddonPanel active={active} key={key}>\n          <StateWrapper active={active}>\n            <MyPanel key={key} active={active} />\n          </StateWrapper>\n        </AddonPanel>\n      </React.Fragment>\n    )\n  }\n  const title = 'Mobile'\n\n  addons.add(PANEL_ID, {\n    type: types.PANEL,\n    title,\n    render,\n    paramKey: PARAM_KEY,\n  })\n})\n"],"names":["getDomPath","el","stack","parentNode","sibCount","sibIndex","i","childNodes","length","sib","nodeName","hasAttribute","id","unshift","toLowerCase","classList","toString","tagName","toFilter","filter","includes","join","getElements","container","tag","Array","from","querySelectorAll","getStylesheetRules","sheets","k","rules","cssRules","e","getNodeName","getActiveStyles","styleSheets","result","activeRegex","Object","keys","forEach","rule","selectorText","match","ruleNoPseudoClass","replace","matches","push","getTapHighlightWarnings","buttons","concat","links","getComputedStyle","map","type","text","innerText","html","innerHTML","path","getSrcsetWarnings","img","src","getAttribute","Boolean","parseInt","width","naturalWidth","alt","getBackgroundImageWarnings","backgroundImageRegex","elsWithBackgroundImage","style","test","clientWidth","styleDict","Map","set","get","responsiveBackgroundImgRegex","entries","styles","reduce","acc","curr","bg","backgroundImage","undefined","textInputs","attachLabels","inputs","input","labelText","labels","parentElement","label","querySelector","getAutocompleteWarnings","warnings","currentType","autocomplete","find","getInputTypeNumberWarnings","getInputTypeWarnings","getTouchTargetSizeWarning","minSize","recommendedDistance","els","getBoundingClientRect","suspectEls","Set","elsWithClose","el1","bounding1","dangerZone","top","left","right","bottom","close","boundingBox","isInside","underMinSize","height","tooClose","present","Math","floor","getOriginalStyles","cssText","tagStyles","StyledWarningTag","styled","div","Warning","React","aria-hidden","focusable","role","xmlns","viewBox","fill","d","StyledInfoTag","Hint","data-prefix","data-icon","className","Spacer","StyledTappableContents","DemoImg","ListEntry","li","props","nostyle","Container","theme","typography","size","s2","color","mediumlight","medium","StyledBanner","StyledRescanButton","button","fixText","ActiveWarnings","href","target","rel","w","key","dangerouslySetInnerHTML","__html","marginTop","TapWarnings","AutocompleteWarnings","InputTypeWarnings","InputTypeNumberWarnings","HeightWarnings","BackgroundImageWarnings","SrcsetWarnings","TouchTargetWarnings","convertToBool","num","Wrapper","children","ThemeProvider","Loading","withTheme","setWarnings","useState","rescan","setRescan","useEffect","recommendedSize","tapHighlight","inputType","srcset","backgroundImg","inputTypeNumber","touchTarget","getFastWarnings","schedule100vh","scheduler","createScheduler","task","runTask","elements","len","vhWarning","css","vhIterator","abortTask","get100vhWarnings","scheduleActive","activeIterator","getActiveWarnings","then","prev","active","warningCount","useMemo","isArray","tab","document","scanComplete","onRescanClick","onClick","Fragment","ViewportManager","viewportState","setViewportState","useAddonState","cachedState","useRef","current","selected","StateWrapper","storyId","setStoryId","useChannel","[object Object]","STORY_RENDERED","args","cloneElement","getContainer","iframe","getElementById","contentDocument","MyPanel","setHTML","timeoutId","checkContainer","body","clearTimeout","setTimeout","Hints","addons","register","add","types","PANEL","title","render","AddonPanel","paramKey"],"mappings":"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"}