import e,{Fragment as t}from"react";import{addons as n,types as l}from"@storybook/addons";import{STORY_RENDERED as r}from"@storybook/core-events";import{useAddonState as a,useChannel as o}from"@storybook/api";import{AddonPanel as i}from"@storybook/components";import c,{ThemeProvider as m}from"styled-components";import{withTheme as s}from"emotion-theming";import{createScheduler as u}from"lrt";function d(e){for(var t=[];e.parentNode;){let r=0,a=0;for(var n=0;n<e.parentNode.childNodes.length;n++){var l=e.parentNode.childNodes[n];l.nodeName===e.nodeName&&(l===e&&(a=r),r++)}e.hasAttribute("id")&&""!==e.id?t.unshift(e.nodeName.toLowerCase()+"#"+e.id):""!==e.classList.toString()&&"BODY"!==e.tagName?t.unshift(e.nodeName.toLowerCase()+"."+e.classList.toString()):t.unshift(r>1?e.nodeName.toLowerCase()+":eq("+a+")":e.nodeName.toLowerCase()),e=e.parentNode}const r=["html","body","div#root"];return t.filter(e=>!r.includes(e)).join(" > ")}const h=(e,t)=>Array.from(e.querySelectorAll(t)),p=(e,t)=>{let n=[];try{n=e[t].rules||e[t].cssRules}catch(e){}return n},g=e=>"A"===e.nodeName?"a":"BUTTON"===e.nodeName?"button":e.nodeName.toLowerCase()+'[role="button"]',E=e=>{const t=h(e,"button").concat(h(e,'[role="button"]')),n=h(e,"a");return t.concat(n).filter(e=>{if("rgba(0, 0, 0, 0)"===getComputedStyle(e)["-webkit-tap-highlight-color"])return!0}).map(e=>({type:g(e),text:e.innerText,html:e.innerHTML,path:d(e)}))},b=e=>h(e,"img").filter(e=>{const t=e.getAttribute("src");return!(e.getAttribute("srcset")||!t||Boolean(t.match(/svg$/))||!(parseInt(getComputedStyle(e).width,10)>600||e.naturalWidth>600))}).map(e=>({src:e.src,path:d(e),alt:e.alt})),y=e=>{const t=/url\(".*?(.png|.jpg|.jpeg)"\)/,n=h(e,"#root *").filter(e=>{const n=getComputedStyle(e);if(n["background-image"]&&t.test(n["background-image"])&&e.clientWidth>200)return!0});if(!n.length)return[];const l=new Map,r=e.styleSheets;Object.keys(r).forEach(e=>{p(r,e).forEach(e=>{if(e)try{n.forEach(t=>{t.matches(e.selectorText)&&l.set(t,(l.get(t)||[]).concat(e))})}catch(e){}})});const a=/-webkit-min-device-pixel-ratio|min-resolution|image-set/;return[...l.entries()].map(([e,t])=>!!t&&!!t.reduce((e,t)=>!1===e?e:!a.test(t),!0)&&e).filter(Boolean).map(e=>{const t=getComputedStyle(e).backgroundImage,n=t.match(/url\("(.*)"\)/)?t.match(/url\("(.*)"\)/)[1]:void 0;return{path:d(e),src:n}})},f=["text","search","tel","url","email","number","password"],w=(e,t)=>e.map(e=>{let n="";if(e.labels&&e.labels[0])n=e.labels[0].innerText;else if("LABEL"===e.parentElement.nodeName)n=e.parentElement.innerText;else if(e.id){const l=t.querySelector(`label[for="${e.id}"]`);l&&(n=l.innerText)}return{path:d(e),labelText:n,type:e.type}}),v=e=>{const t=h(e,"input").filter(e=>{const t=e.getAttribute("type"),n=e.getAttribute("autocomplete");return!(!f.find(e=>t===e)||n)});return w(t,e)},k=e=>{const t=h(e,'input[type="number"]');return w(t)},x=e=>{const t=h(e,'input[type="text"]').concat(h(e,"input:not([type])")).filter(e=>!e.getAttribute("inputmode"));return w(t,e)},T=({container:e,minSize:t,recommendedDistance:n})=>{const l=h(e,"button").concat(h(e,'[role="button"]')).concat(h(e,"a")).map(e=>[e,e.getBoundingClientRect()]),r=new Set([...l]),a=l.map(([e,t])=>{const l={top:t.top-n,left:t.left-n,right:t.right+n,bottom:t.bottom+n};return{close:Array.from(r).filter(([t,n])=>t!==e&&!!((e,t)=>t.top<=e.bottom&&t.bottom>=e.top&&t.left<=e.right&&t.right>=e.left)(l,n)&&t)||null,el:e,boundingBox:t}}),o=a.filter(({boundingBox:{width:e,height:n}})=>e<t||n<t),i=a.filter(({close:e})=>e&&e.length),c=({el:e,boundingBox:{width:t,height:n},close:l})=>({type:"A"===e.nodeName?"a":"BUTTON"===e.nodeName?"button":e.nodeName.toLowerCase()+'[role="button"]',path:d(e),text:e.innerText,html:e.innerHTML,width:Math.floor(t),height:Math.floor(n),close:l});return{underMinSize:o.map(c),tooClose:i.map(c)}},S=e=>{const t=h(e,"button").concat(h(e,'[role="button"]')),n=h(e,"a");return t.concat(n).map(t=>function(e,t){const n=e.styleSheets,l=[],r=/:active$/;return Object.keys(n).forEach(e=>{p(n,e).forEach(e=>{if(!e)return;if(!e.selectorText||!e.selectorText.match(r))return;const n=e.selectorText.replace(r,"");try{t.matches(n)&&l.push(e)}catch(e){}})}),l.length?l:null}(e,t)?{type:g(t),text:t.innerText,html:t.innerHTML,path:d(t)}:null).filter(Boolean)},L=(e,t)=>{const n=e.styleSheets;let l=[];return Object.keys(n).forEach(e=>{p(n,e).forEach(e=>{if(e)try{t.matches(e.selectorText)&&l.push(e.cssText)}catch(e){}})}),l};let N,z,M,C,A,O,$,B,I,H=e=>e;const j="\n  padding: .25rem .5rem;\n  font-weight: bold;\n  display:inline-block;\n  border-radius: 10px;\n  margin-bottom: 1rem;\n  svg {\n    margin-right: .25rem;\n    display: inline-block;\n    height: .7rem;\n    line-height: 1;\n    position: relative;\n    top: .03rem;\n    letter-spacing: .01rem;\n  }\n",q=c.div(N||(N=H`
  color: ${0};
  background-color: hsl(41, 100%, 92%);
  ${0}
`),"#bd4700",j),D=()=>e.createElement(q,null,e.createElement("svg",{"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},e.createElement("path",{fill:"currentColor",d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"})),"warning"),_=c.div(z||(z=H`
  ${0}
  color: ${0};
  background-color: hsla(214, 92%, 45%, 0.1);
`),j,"#0965df"),R=()=>e.createElement(_,null,e.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"magic",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",className:"svg-inline--fa fa-magic fa-w-16 fa-5x"},e.createElement("path",{fill:"currentColor",d:"M224 96l16-32 32-16-32-16-16-32-16 32-32 16 32 16 16 32zM80 160l26.66-53.33L160 80l-53.34-26.67L80 0 53.34 53.33 0 80l53.34 26.67L80 160zm352 128l-26.66 53.33L352 368l53.34 26.67L432 448l26.66-53.33L512 368l-53.34-26.67L432 288zm70.62-193.77L417.77 9.38C411.53 3.12 403.34 0 395.15 0c-8.19 0-16.38 3.12-22.63 9.38L9.38 372.52c-12.5 12.5-12.5 32.76 0 45.25l84.85 84.85c6.25 6.25 14.44 9.37 22.62 9.37 8.19 0 16.38-3.12 22.63-9.37l363.14-363.15c12.5-12.48 12.5-32.75 0-45.24zM359.45 203.46l-50.91-50.91 86.6-86.6 50.91 50.91-86.6 86.6z",className:""})),"hint"),U=c.div(M||(M=H`
  padding: 1rem;
`)),W=c.div(C||(C=H`
  display: inline-block;
  padding-top: 0.25rem;
  height: 2rem;
  min-width: 1rem;
  width: auto;
  background-color: hsla(0, 0%, 50%, 0.1);
  border-radius: 3px;
  li {
    list-style-type: none;
  }
  img,
  svg {
    max-height: 2rem !important;
    min-height: 1rem !important;
    width: auto !important;
  }
`)),Y=c.img(A||(A=H`
  height: 4rem;
  width: auto;
  max-width: 100%;
  background-color: hsla(0, 0%, 0%, 0.2);
`)),G=c.li(O||(O=H`
  margin-bottom: 0.5rem;
  ${0};
`),e=>e.nostyle?"list-style-type: none;":""),J=c.div($||($=H`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(25rem, 1fr));

  font-size: ${0}px;

  p {
    line-height: 1.4;
  }

  h3 {
    font-size: ${0}px;
    font-weight: bold;
    margin-bottom: 0.5rem;
    margin-top: 0;
  }

  code {
    background: hsla(0, 0%, 50%, 0.1);
    border-radius: 3px;
  }

  summary {
    cursor: pointer;
    display: block;
    margin-right: 1rem;
    padding: 0.2rem 0.3rem;
    border-radius: 5px;
    color: ${0};
    &:focus {
      outline: none;
      box-shadow: 0 0 0 3px ${0};
    }
  }

  ul {
    padding-left: 1.25rem;
    max-height: 12rem;
    overflow: auto;
    padding-bottom: 0.5rem;
    li {
      margin-bottom: 0.3rem;
    }
  }
  a {
    text-decoration: none;
    color: ${0};
    &:hover {
      border-bottom: 1px solid ${0};
    }
  }
  > div {
    border-bottom: 1px solid ${0};
    border-right: 1px solid ${0};
  }
`),e=>e.theme.typography.size.s2,e=>e.theme.typography.size.s2,"#0965df",e=>e.theme.color.mediumlight,"#0965df","#0965df",e=>e.theme.color.medium,e=>e.theme.color.medium),P=c.div(B||(B=H`
  display: flex;
  align-items: center;
  padding: 0 0.75rem;
  grid-column: 1 / -1;
  height: 2.875rem;
`)),X=c.button(I||(I=H`
  margin-left: 1rem;
  background: transparent;
  border-width: 1px;
  border-radius: 3px;
  cursor: pointer;
`)),F="Learn more",K=({warnings:t})=>t.length?e.createElement(U,null,e.createElement(R,null),e.createElement("h3",null,e.createElement("code",null,":active")," styles on iOS"),e.createElement("p",null,e.createElement("code",null,":active")," styles will only appear in iOS"," ",e.createElement("a",{href:"https://stackoverflow.com/questions/3885018/active-pseudo-class-doesnt-work-in-mobile-safari"},"if a touch listener is added to the element or one of its ancestors"),". Once activated in this manner, ",e.createElement("code",null,":active")," styles (along with"," ",e.createElement("code",null,":hover")," styles) will be applied immediately in iOS when a user taps, possibly creating a confusing UX. (On Android,"," ",e.createElement("code",null,":active")," styles are applied with a slight delay to allow the user to use gestures like scroll without necessarily activating"," ",e.createElement("code",null,":active")," styles.)"),e.createElement("ul",null,t.map((t,n)=>e.createElement(G,{key:n},e.createElement("code",null,t.type)," with content"," ",t.text?e.createElement("b",null,t.text):t.html?e.createElement(W,{dangerouslySetInnerHTML:{__html:t.html}}):"[no text found]"))),e.createElement("details",null,e.createElement("summary",null,F),e.createElement("p",{style:{marginTop:"1rem"}},e.createElement("a",{href:"https://stackoverflow.com/questions/3885018/active-pseudo-class-doesnt-work-in-mobile-safari/33681490#33681490"},"Relevant Stack Overflow thread")))):null,V=({warnings:t})=>t.length?e.createElement(U,null,e.createElement(R,null),e.createElement("h3",null,"Tap style removed from tappable element"),e.createElement("p",null,"These elements have an invisible"," ",e.createElement("code",null,"-webkit-tap-highlight-color"),". While this might be intentional, please verify that they have appropriate tap indication styles added through other means."),e.createElement("ul",null,t.map((t,n)=>e.createElement(G,{key:n},e.createElement("code",null,t.type)," with content"," ",t.text?e.createElement("b",null,t.text):t.html?e.createElement(W,{dangerouslySetInnerHTML:{__html:t.html}}):"[no text found]"))),e.createElement("details",null,e.createElement("summary",null,F),e.createElement("p",null,"Some stylesheets remove the tap indication highlight shown on iOS and Android browsers by adding the code"," ",e.createElement("code",null,"-webkit-tap-highlight-color: transparent"),". In order to maintain a good mobile experience, tap styles should be added via appropriate ",e.createElement("code",null,":active")," CSS styles (though, note that"," ",e.createElement("a",{href:"https://stackoverflow.com/questions/3885018/active-pseudo-class-doesnt-work-in-mobile-safari"},e.createElement("code",null,":active")," styles work inconsistently in iOS"),") , or via JavaScript on the ",e.createElement("code",null,"touchstart")," event."))):null,Q=({warnings:t})=>t.length?e.createElement(U,null,e.createElement(D,null),e.createElement("h3",null,"Input with no ",e.createElement("code",null,"autocomplete")," attribute"),e.createElement("p",null,"Most textual inputs should have an explicit ",e.createElement("code",null,"autocomplete")," ","attribute."),e.createElement("p",null,"If you truly want to disable autocomplete, try using a"," ",e.createElement("a",{href:"https://bugs.chromium.org/p/chromium/issues/detail?id=468153#c164"},"semantically valid but unique value rather than"," ",e.createElement("code",null,'autocomplete="off"')),", which doesn't work in Chrome."),e.createElement("p",null,"Note: ",e.createElement("code",null,"autocomplete")," is styled as ",e.createElement("code",null,"autoComplete")," ","in JSX."),e.createElement("ul",null,t.map((t,n)=>e.createElement(G,{key:n},e.createElement("code",null,'input type="',t.type,'"')," and label"," ",e.createElement("b",null,t.labelText||"[no label found]")))),e.createElement("details",null,e.createElement("summary",null,F),e.createElement("ul",null,e.createElement("li",{key:"1"},e.createElement("a",{href:"https://developers.google.com/web/updates/2015/06/checkout-faster-with-autofill"},"Autocomplete documentation by Google")),e.createElement("li",{key:"2"},e.createElement("a",{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/autocomplete"},"Autocomplete documentation by Mozilla"))))):null,Z=({warnings:t})=>t.length?e.createElement(U,null,e.createElement(R,null),e.createElement("h3",null,"Plain input type ",e.createElement("code",null,"text")," detected"),e.createElement("p",null,"This will render the default text keyboard on mobile (which could very well be what you want!) If you haven't already, take a moment to make sure this is correct. You can use"," ",e.createElement("a",{href:"https://better-mobile-inputs.netlify.com/"},"this tool")," to explore keyboard options."),e.createElement("ul",null,t.map((t,n)=>e.createElement(G,{key:n},e.createElement("code",null,'input type="',t.type,'"')," and label"," ",e.createElement("b",null,t.labelText||"[no label found]")))),e.createElement("details",null,e.createElement("summary",null,F),e.createElement("p",null,e.createElement("a",{href:"https://css-tricks.com/better-form-inputs-for-better-mobile-user-experiences/"},"Article reviewing the importance of using correct input types on the mobile web from CSS Tricks.")))):null,ee=({warnings:t})=>t.length?e.createElement(U,null,e.createElement(R,null),e.createElement("h3",null,"Input type ",e.createElement("code",null,"number")," detected"),e.createElement("p",null,e.createElement("code",null,'<input type="text" inputmode="decimal"/>')," ","could give you improved usability over"," ",e.createElement("code",null,'<input type="number" />'),"."),e.createElement("p",null,"Note: ",e.createElement("code",null,"inputmode")," is styled as ",e.createElement("code",null,"inputMode")," in JSX."," "),e.createElement("ul",null,t.map((t,n)=>e.createElement(G,{key:n},e.createElement("code",null,'input type="',t.type,'"')," and label"," ",e.createElement("b",null,t.labelText||"[no label found]")))),e.createElement("details",null,e.createElement("summary",null,F),e.createElement("p",null,e.createElement("a",{href:"https://technology.blog.gov.uk/2020/02/24/why-the-gov-uk-design-system-team-changed-the-input-type-for-numbers/"},"Overview of the issues with"," ",e.createElement("code",null,'input type="number"')," from gov.uk.")))):null,te=({warnings:t})=>t.length?e.createElement(U,null,e.createElement(R,null),e.createElement("h3",null,"Usage of ",e.createElement("code",null,"100vh")," CSS"),e.createElement("p",null,"Viewport units are"," ",e.createElement("a",{href:"https://chanind.github.io/javascript/2019/09/28/avoid-100vh-on-mobile-web.html"},"tricky on mobile.")," ","On some mobile browers, depending on scroll position, ",e.createElement("code",null,"100vh")," ","might take up more than 100% of screen height due to browser chrome like the address bar."),e.createElement("ul",null,t.map(({path:t},n)=>e.createElement(G,{key:n},e.createElement("code",null,t))))):null,ne=({warnings:t})=>t.length?e.createElement(U,null,e.createElement(D,null),e.createElement("h3",null,"Non-dynamic background image"),e.createElement("p",null,"Downloading larger-than-necessary images hurts performance for users on mobile. You can use"," ",e.createElement("a",{href:"https://developer.mozilla.org/en-US/docs/Web/CSS/image-set"},e.createElement("code",null,"image-set"))," ","to serve an appropriate background image based on the user's device resolution."),e.createElement("ul",null,t.map(({src:t,alt:n},l)=>e.createElement(G,{key:l,nostyle:!0},e.createElement("div",null,e.createElement(Y,{src:t,alt:n}))))),e.createElement("details",null,e.createElement("summary",null,F),e.createElement("ul",null,e.createElement("li",{key:"1"},e.createElement("a",{href:"https://css-tricks.com/responsive-images-css/"},"Article discussing responsive background images in greater detail, including the interaction of ",e.createElement("code",null,"image-set")," with media queries, from CSS Tricks."))))):null,le=({warnings:t})=>t.length?e.createElement(U,null,e.createElement(D,null),e.createElement("h3",null,"Large image without ",e.createElement("code",null,"srcset")),e.createElement("p",null,"Downloading larger-than-necessary images hurts performance for users on mobile. You can use ",e.createElement("code",null,"srcset")," to customize image sizes for different device resolutions and sizes."),e.createElement("ul",null,t.map(({src:t,alt:n},l)=>e.createElement(G,{key:l,nostyle:!0},e.createElement("div",null,e.createElement(Y,{src:t,alt:n}))))),e.createElement("details",null,e.createElement("summary",null,F),e.createElement("ul",null,e.createElement("li",{key:"1"},e.createElement("a",{href:"https://cloudfour.com/thinks/responsive-images-the-simple-way"},"Summary of the why and how of responsive images")),e.createElement("li",{key:"2"},e.createElement("a",{href:"https://www.responsivebreakpoints.com/"},"A tool to generate responsive images"))))):null,re=({warnings:{underMinSize:t,tooClose:n}})=>t.length||n.length?e.createElement(U,null,e.createElement(D,null),Boolean(t.length)&&e.createElement("div",null,e.createElement("h3",null,"Small touch target"),e.createElement("p",null,"With heights and/or widths of less than ",32,"px, these tappable elements could be difficult for users to press:"),e.createElement("ul",null,t.map((t,n)=>e.createElement(G,{key:n},e.createElement("code",null,t.type)," with content"," ",t.text?e.createElement("b",null,t.text):t.html?e.createElement(W,{dangerouslySetInnerHTML:{__html:t.html}}):"[no text found]")))),Boolean(n.length)&&e.createElement("div",null,e.createElement("h3",{style:{marginTop:t.length?".5rem":"0"}},"Touch targets close together"," "),e.createElement("p",null,"These tappable elements are less than ",8,"px from at least one other tappable element:"),e.createElement("ul",null,n.map((t,n)=>e.createElement(G,{key:n},e.createElement("code",null,t.type)," with content"," ",t.text?e.createElement("b",null,t.text):t.html?e.createElement(W,{dangerouslySetInnerHTML:{__html:t.html}}):"[no text found]")))),e.createElement("details",null,e.createElement("summary",null,F),e.createElement("ul",null,e.createElement("li",{key:"1"},e.createElement("a",{href:"https://www.nngroup.com/articles/touch-target-size/"},"Touch target size article from the Nielsen Norman Group")),e.createElement("li",{key:"2"},e.createElement("a",{href:"https://web.dev/accessible-tap-targets/"},"Tap target size recommendations from Google"))))):null,ae=e=>e>0?1:0,oe=({theme:t,children:n})=>e.createElement(m,{theme:t},e.createElement(J,null,n)),ie=s(({theme:t})=>e.createElement(oe,{theme:t},e.createElement(P,null,"Running scan...")));var ce=s(({container:n,theme:l})=>{const[r,a]=e.useState(void 0),[o,i]=e.useState(0);e.useEffect(()=>{a((({container:e,minSize:t,recommendedSize:n,recommendedDistance:l})=>({tapHighlight:E(e),autocomplete:v(e),inputType:x(e),srcset:b(e),backgroundImg:y(e),inputTypeNumber:k(e),touchTarget:T({container:e,minSize:t,recommendedSize:n,recommendedDistance:l}),active:S(e)}))({container:n,minSize:32,recommendedDistance:8,recommendedSize:48}));const{abortTask:e,task:t}=(e=>{const t=u(),n=t.runTask(function*(e){const t=h(e,"#root *"),n=t.length,l=[];for(let r=0;r<n;r++){const n=t[r],a=L(e,n).find(e=>/100vh/.test(e));a&&l.push({el:n,css:a,path:d(n)}),yield}return l}(e));return{abortTask:()=>t.abortTask(n),task:n}})(n);return t.then(e=>{a(t=>({...t,height:e}))}),e},[n,o]);const c=e.useMemo(()=>r?Object.keys(r).reduce((e,t)=>{const n=r[t];return e+(Array.isArray(n)?ae(n.length):Object.keys(n).map(e=>n[e]).reduce((e,t)=>e+ae(t.length),0))},0):0,[r]);if(e.useEffect(()=>{const e=Array.from(document.querySelectorAll('button[role="tab"]')).find(e=>/^Mobile(\s\(\d+\))?$/.test(e.innerText));return e&&(e.innerText=0===c?"Mobile":`Mobile (${c})`),()=>e.innerText="Mobile"},[c]),!r)return e.createElement(ie,null);const s=!!r.height,p=()=>i(e=>e+1);return 0===c&&s?e.createElement(oe,{theme:l},e.createElement(P,null,e.createElement("span",null,"Looking good! No mobile hints available."),e.createElement(X,{onClick:p,type:"button"},"Rescan"))):e.createElement(m,{theme:l},e.createElement(J,null,e.createElement(P,null,s?e.createElement(t,null,e.createElement("span",null,"Scan complete!"),e.createElement(X,{onClick:p,type:"button"},"Rescan")):e.createElement("span",null,"Preliminary results shown, still scanning...")),e.createElement(re,{warnings:r.touchTarget}),e.createElement(Q,{warnings:r.autocomplete}),e.createElement(Z,{warnings:r.inputType}),e.createElement(ee,{warnings:r.inputTypeNumber}),r.height&&e.createElement(te,{warnings:r.height}),e.createElement(V,{warnings:r.tapHighlight}),e.createElement(K,{warnings:r.active}),e.createElement(le,{warnings:r.srcset}),e.createElement(ne,{warnings:r.backgroundImg})))});const me=({active:t})=>{const[n,l]=a("storybook/viewport"),r=e.useRef(null);return e.useEffect(()=>{r.current&&!t?(l({selected:r.current}),r.current=null):!t||n&&"reset"!==n.selected||(r.current="reset",l({selected:"mobile1"}))},[t]),null},se=({children:t})=>{const[n,l]=e.useState("");return o({[r]:(...e)=>{l(e)}}),e.cloneElement(t,{storyId:n})},ue=()=>{const e=document.getElementById("storybook-preview-iframe");return e?e.contentDocument:null},de=({storyId:t})=>{const[n,l]=e.useState(void 0);e.useEffect(()=>{l(void 0);let e=void 0;const t=()=>{const n=ue();n&&n.body?l(n.body.innerHTML):(clearTimeout(e),e=setTimeout(t,2e3))};return clearTimeout(e),e=setTimeout(t,2e3),()=>clearTimeout(e)},[t]);const r=ue();return n&&r?e.createElement(ce,{container:r}):e.createElement(ie,null)};n.register("mobile-hints",()=>{n.add("mobile-hints/panel",{type:l.PANEL,title:"Mobile",render:({active:t,key:n})=>e.createElement(e.Fragment,{key:"storybook-mobile"},e.createElement(me,{active:t}),e.createElement(i,{active:t,key:n},e.createElement(se,{active:t},e.createElement(de,{key:n,active:t})))),paramKey:"mobile-hints"})});
//# sourceMappingURL=register.modern.js.map
